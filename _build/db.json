{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"source/images/sql-execute-1.jpg","path":"images/sql-execute-1.jpg","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/js/algolia-search.js","path":"js/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/js/bookmark.js","path":"js/bookmark.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/next-boot.js","path":"js/next-boot.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/motion.js","path":"js/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/local-search.js","path":"js/local-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/anime.min.js","path":"lib/anime.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.jpg","path":"images/avatar.jpg","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/pisces.js","path":"js/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/muse.js","path":"js/schemes/muse.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-regular-400.woff2","path":"lib/font-awesome/webfonts/fa-regular-400.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/all.min.css","path":"lib/font-awesome/css/all.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-solid-900.woff2","path":"lib/font-awesome/webfonts/fa-solid-900.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-brands-400.woff2","path":"lib/font-awesome/webfonts/fa-brands-400.woff2","modified":0,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"c2bbfacbc6ba4c73945548f1af9c28faaf368842","modified":1594458138843},{"_id":"themes/next/.eslintrc.json","hash":"cc5f297f0322672fe3f684f823bc4659e4a54c41","modified":1593857338947},{"_id":"themes/next/.editorconfig","hash":"8570735a8d8d034a3a175afd1dd40b39140b3e6a","modified":1593857338946},{"_id":"themes/next/.gitattributes","hash":"a54f902957d49356376b59287b894b1a3d7a003f","modified":1593857338947},{"_id":"themes/next/.gitignore","hash":"56f3470755c20311ddd30d421b377697a6e5e68b","modified":1593857338952},{"_id":"themes/next/.stylintrc","hash":"2cf4d637b56d8eb423f59656a11f6403aa90f550","modified":1593857338952},{"_id":"themes/next/.travis.yml","hash":"ecca3b919a5b15886e3eca58aa84aafc395590da","modified":1593857338952},{"_id":"themes/next/LICENSE.md","hash":"18144d8ed58c75af66cb419d54f3f63374cd5c5b","modified":1593857338952},{"_id":"themes/next/README.md","hash":"9b4b7d66aca47f9c65d6321b14eef48d95c4dff1","modified":1593857338952},{"_id":"themes/next/crowdin.yml","hash":"e026078448c77dcdd9ef50256bb6635a8f83dca6","modified":1593857338953},{"_id":"themes/next/gulpfile.js","hash":"1b4fc262b89948937b9e3794de812a7c1f2f3592","modified":1593857338960},{"_id":"themes/next/_config.yml","hash":"011afa5d41255f1204694add761e4bc81200347b","modified":1593862833946},{"_id":"themes/next/package.json","hash":"62fad6de02adbbba9fb096cbe2dcc15fe25f2435","modified":1593857338989},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1594458078377},{"_id":"source/_posts/sql-execute.md","hash":"0ddc9d9b75fd6bf86342f660d2347d0b5c266299","modified":1594560319430},{"_id":"source/_posts/transaction-intro.md","hash":"e2342b7d70281b7a785bd2b15b9b1ea67a26cf28","modified":1594738391518},{"_id":"source/_posts/menu.md","hash":"6db05951731e147967aa031b2a5a4d28607543d2","modified":1593862713781},{"_id":"source/archives/index.md","hash":"f275280243804c848b2c8c79a72e35e486be36e8","modified":1593838240368},{"_id":"source/categories/index.md","hash":"4cd6c17983a961a9efde496b64ac548c6fffa17f","modified":1593861512927},{"_id":"source/tags/index.md","hash":"5fb0f145c4628f09f7c2406ac106794ec3e8e9f7","modified":1593861555878},{"_id":"source/images/sql-execute-1.jpg","hash":"de7bb4171af4fac85259ef6a229c6c8fd4cd245c","modified":1594560155351},{"_id":"themes/next/.git_bak/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1593857338933},{"_id":"themes/next/.git_bak/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1593856664496},{"_id":"themes/next/.git_bak/config","hash":"e78135eac1ede2f3ca79747839db482790e54b3c","modified":1593857338936},{"_id":"themes/next/.git_bak/index","hash":"67865cd6cf6a72bc10f46fa850cd4d45502859d5","modified":1593862256184},{"_id":"themes/next/.git_bak/packed-refs","hash":"106c07d5e79883e01ae524173c32e1ab7ee0d172","modified":1593857338930},{"_id":"themes/next/.github/CODE_OF_CONDUCT.md","hash":"aa4cb7aff595ca628cb58160ee1eee117989ec4e","modified":1593857338947},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"e554931b98f251fd49ff1d2443006d9ea2c20461","modified":1593857338948},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"1a435c20ae8fa183d49bbf96ac956f7c6c25c8af","modified":1593857338949},{"_id":"themes/next/.github/config.yml","hash":"1d3f4e8794986817c0fead095c74f756d45f91ed","modified":1593857338950},{"_id":"themes/next/.github/issue-close-app.yml","hash":"7cba457eec47dbfcfd4086acd1c69eaafca2f0cd","modified":1593857338950},{"_id":"themes/next/.github/issue_label_bot.yaml","hash":"fca600ddef6f80c5e61aeed21722d191e5606e5b","modified":1593857338950},{"_id":"themes/next/.github/lock.yml","hash":"61173b9522ebac13db2c544e138808295624f7fd","modified":1593857338950},{"_id":"themes/next/.github/mergeable.yml","hash":"0ee56e23bbc71e1e76427d2bd255a9879bd36e22","modified":1593857338951},{"_id":"themes/next/.github/release-drafter.yml","hash":"3cc10ce75ecc03a5ce86b00363e2a17eb65d15ea","modified":1593857338951},{"_id":"themes/next/.github/stale.yml","hash":"fdf82de9284f8bc8e0b0712b4cc1cb081a94de59","modified":1593857338951},{"_id":"themes/next/.github/support.yml","hash":"d75db6ffa7b4ca3b865a925f9de9aef3fc51925c","modified":1593857338951},{"_id":"themes/next/docs/ALGOLIA-SEARCH.md","hash":"c7a994b9542040317d8f99affa1405c143a94a38","modified":1593857338954},{"_id":"themes/next/docs/AUTHORS.md","hash":"10135a2f78ac40e9f46b3add3e360c025400752f","modified":1593857338954},{"_id":"themes/next/docs/DATA-FILES.md","hash":"cddbdc91ee9e65c37a50bec12194f93d36161616","modified":1593857338954},{"_id":"themes/next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1593857338953},{"_id":"themes/next/docs/LEANCLOUD-COUNTER-SECURITY.md","hash":"94dc3404ccb0e5f663af2aa883c1af1d6eae553d","modified":1593857338955},{"_id":"themes/next/docs/INSTALLATION.md","hash":"af88bcce035780aaa061261ed9d0d6c697678618","modified":1593857338954},{"_id":"themes/next/docs/MATH.md","hash":"d645b025ec7fb9fbf799b9bb76af33b9f5b9ed93","modified":1593857338955},{"_id":"themes/next/docs/LICENSE.txt","hash":"368bf2c29d70f27d8726dd914f1b3211cae4bbab","modified":1593857338955},{"_id":"themes/next/docs/UPDATE-FROM-5.1.X.md","hash":"8b6e4b2c9cfcb969833092bdeaed78534082e3e6","modified":1593857338955},{"_id":"themes/next/languages/ar.yml","hash":"9815e84e53d750c8bcbd9193c2d44d8d910e3444","modified":1593857338960},{"_id":"themes/next/languages/de.yml","hash":"74c59f2744217003b717b59d96e275b54635abf5","modified":1593857338960},{"_id":"themes/next/languages/default.yml","hash":"45bc5118828bdc72dcaa25282cd367c8622758cb","modified":1593857338960},{"_id":"themes/next/languages/en.yml","hash":"45bc5118828bdc72dcaa25282cd367c8622758cb","modified":1593857338960},{"_id":"themes/next/languages/es.yml","hash":"c64cf05f356096f1464b4b1439da3c6c9b941062","modified":1593857338961},{"_id":"themes/next/languages/fa.yml","hash":"3676b32fda37e122f3c1a655085a1868fb6ad66b","modified":1593857338961},{"_id":"themes/next/languages/fr.yml","hash":"752bf309f46a2cd43890b82300b342d7218d625f","modified":1593857338961},{"_id":"themes/next/languages/id.yml","hash":"572ed855d47aafe26f58c73b1394530754881ec2","modified":1593857338961},{"_id":"themes/next/languages/it.yml","hash":"44759f779ce9c260b895532de1d209ad4bd144bf","modified":1593857338962},{"_id":"themes/next/languages/ja.yml","hash":"0cf0baa663d530f22ff380a051881216d6adcdd8","modified":1593857338962},{"_id":"themes/next/languages/hu.yml","hash":"b1ebb77a5fd101195b79f94de293bcf9001d996f","modified":1593857338961},{"_id":"themes/next/languages/ko.yml","hash":"0feea9e43cd399f3610b94d755a39fff1d371e97","modified":1593857338962},{"_id":"themes/next/languages/nl.yml","hash":"5af3473d9f22897204afabc08bb984b247493330","modified":1593857338962},{"_id":"themes/next/languages/pt-BR.yml","hash":"67555b1ba31a0242b12fc6ce3add28531160e35b","modified":1593857338963},{"_id":"themes/next/languages/ru.yml","hash":"e993d5ca072f7f6887e30fc0c19b4da791ca7a88","modified":1593857338963},{"_id":"themes/next/languages/pt.yml","hash":"718d131f42f214842337776e1eaddd1e9a584054","modified":1593857338963},{"_id":"themes/next/languages/tr.yml","hash":"fe793f4c2608e3f85f0b872fd0ac1fb93e6155e2","modified":1593857338963},{"_id":"themes/next/languages/uk.yml","hash":"3a6d635b1035423b22fc86d9455dba9003724de9","modified":1593857338963},{"_id":"themes/next/languages/vi.yml","hash":"93393b01df148dcbf0863f6eee8e404e2d94ef9e","modified":1593857338964},{"_id":"themes/next/languages/zh-HK.yml","hash":"3789f94010f948e9f23e21235ef422a191753c65","modified":1593857338964},{"_id":"themes/next/languages/zh-CN.yml","hash":"a1f15571ee7e1e84e3cc0985c3ec4ba1a113f6f8","modified":1593857338964},{"_id":"themes/next/languages/zh-TW.yml","hash":"8c09da7c4ec3fca2c6ee897b2eea260596a2baa1","modified":1593857338964},{"_id":"themes/next/layout/_layout.swig","hash":"6a6e92a4664cdb981890a27ac11fd057f44de1d5","modified":1593857338965},{"_id":"themes/next/layout/category.swig","hash":"1bde61cf4d2d171647311a0ac2c5c7933f6a53b0","modified":1593857338987},{"_id":"themes/next/layout/index.swig","hash":"7f403a18a68e6d662ae3e154b2c1d3bbe0801a23","modified":1593857338988},{"_id":"themes/next/layout/page.swig","hash":"db581bdeac5c75fabb0f17d7c5e746e47f2a9168","modified":1593857338988},{"_id":"themes/next/layout/archive.swig","hash":"e4e31317a8df68f23156cfc49e9b1aa9a12ad2ed","modified":1593857338987},{"_id":"themes/next/layout/post.swig","hash":"2f6d992ced7e067521fdce05ffe4fd75481f41c5","modified":1593857338988},{"_id":"themes/next/layout/tag.swig","hash":"0dfb653bd5de980426d55a0606d1ab122bd8c017","modified":1593857338988},{"_id":"themes/next/scripts/renderer.js","hash":"49a65df2028a1bc24814dc72fa50d52231ca4f05","modified":1593857338994},{"_id":"themes/next/.git_bak/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1593856664499},{"_id":"themes/next/.git_bak/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1593856664497},{"_id":"themes/next/.git_bak/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1593856664498},{"_id":"themes/next/.git_bak/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1593856664501},{"_id":"themes/next/.git_bak/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1593856664502},{"_id":"themes/next/.git_bak/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1593856664503},{"_id":"themes/next/.git_bak/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1593856664500},{"_id":"themes/next/.git_bak/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1593856664498},{"_id":"themes/next/.git_bak/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1593856664500},{"_id":"themes/next/.git_bak/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1593856664503},{"_id":"themes/next/.git_bak/info/exclude","hash":"bb5a85730dcf100facee799c05cc4f6affec0745","modified":1593856664496},{"_id":"themes/next/.git_bak/logs/HEAD","hash":"c6061cb06758c3c5ad7af34c0db7588ca51dcdf7","modified":1593857338935},{"_id":"themes/next/.github/ISSUE_TEMPLATE/bug-report.md","hash":"c3e6b8196c983c40fd140bdeca012d03e6e86967","modified":1593857338948},{"_id":"themes/next/.github/ISSUE_TEMPLATE/question.md","hash":"53df7d537e26aaf062d70d86835c5fd8f81412f3","modified":1593857338949},{"_id":"themes/next/.github/ISSUE_TEMPLATE/other.md","hash":"d3efc0df0275c98440e69476f733097916a2d579","modified":1593857338949},{"_id":"themes/next/.github/ISSUE_TEMPLATE/feature-request.md","hash":"12d99fb8b62bd9e34d9672f306c9ae4ace7e053e","modified":1593857338948},{"_id":"themes/next/docs/ru/DATA-FILES.md","hash":"0bd2d696f62a997a11a7d84fec0130122234174e","modified":1593857338956},{"_id":"themes/next/docs/ru/INSTALLATION.md","hash":"9c4fe2873123bf9ceacab5c50d17d8a0f1baef27","modified":1593857338956},{"_id":"themes/next/docs/ru/README.md","hash":"85dd68ed1250897a8e4a444a53a68c1d49eb7e11","modified":1593857338956},{"_id":"themes/next/docs/ru/UPDATE-FROM-5.1.X.md","hash":"5237a368ab99123749d724b6c379415f2c142a96","modified":1593857338956},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"fb23b85db6f7d8279d73ae1f41631f92f64fc864","modified":1593857338957},{"_id":"themes/next/docs/zh-CN/ALGOLIA-SEARCH.md","hash":"34b88784ec120dfdc20fa82aadeb5f64ef614d14","modified":1593857338957},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"d3f03be036b75dc71cf3c366cd75aee7c127c874","modified":1593857338957},{"_id":"themes/next/docs/zh-CN/DATA-FILES.md","hash":"ca1030efdfca5e20f9db2e7a428998e66a24c0d0","modified":1593857338958},{"_id":"themes/next/docs/zh-CN/INSTALLATION.md","hash":"579c7bd8341873fb8be4732476d412814f1a3df7","modified":1593857338958},{"_id":"themes/next/docs/zh-CN/LEANCLOUD-COUNTER-SECURITY.md","hash":"8b18f84503a361fc712b0fe4d4568e2f086ca97d","modified":1593857338958},{"_id":"themes/next/docs/zh-CN/MATH.md","hash":"b92585d251f1f9ebe401abb5d932cb920f9b8b10","modified":1593857338959},{"_id":"themes/next/docs/zh-CN/README.md","hash":"c038629ff8f3f24e8593c4c8ecf0bef3a35c750d","modified":1593857338959},{"_id":"themes/next/docs/zh-CN/UPDATE-FROM-5.1.X.md","hash":"d9ce7331c1236bbe0a551d56cef2405e47e65325","modified":1593857338959},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"9c8dc0b8170679cdc1ee9ee8dbcbaebf3f42897b","modified":1593857338965},{"_id":"themes/next/layout/_macro/post.swig","hash":"090b5a9b6fca8e968178004cbd6cff205b7eba57","modified":1593857338965},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"71655ca21907e9061b6e8ac52d0d8fbf54d0062b","modified":1593857338965},{"_id":"themes/next/layout/_partials/comments.swig","hash":"db6ab5421b5f4b7cb32ac73ad0e053fdf065f83e","modified":1593857338966},{"_id":"themes/next/layout/_partials/footer.swig","hash":"e5a2bdf45fde7cea9cb03993f5a0fd960326ed5d","modified":1593862255682},{"_id":"themes/next/layout/_partials/languages.swig","hash":"ba9e272f1065b8f0e8848648caa7dea3f02c6be1","modified":1593857338968},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"9876dbfc15713c7a47d4bcaa301f4757bd978269","modified":1593857338969},{"_id":"themes/next/layout/_partials/widgets.swig","hash":"83a40ce83dfd5cada417444fb2d6f5470aae6bb0","modified":1593857338976},{"_id":"themes/next/layout/_scripts/index.swig","hash":"cea942b450bcb0f352da78d76dc6d6f1d23d5029","modified":1593857338976},{"_id":"themes/next/layout/_scripts/noscript.swig","hash":"d1f2bfde6f1da51a2b35a7ab9e7e8eb6eefd1c6b","modified":1593857338977},{"_id":"themes/next/layout/_scripts/pjax.swig","hash":"4d2c93c66e069852bb0e3ea2e268d213d07bfa3f","modified":1593857338977},{"_id":"themes/next/layout/_scripts/three.swig","hash":"a4f42f2301866bd25a784a2281069d8b66836d0b","modified":1593857338979},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"ef38c213679e7b6d2a4116f56c9e55d678446069","modified":1593857338979},{"_id":"themes/next/layout/_third-party/baidu-push.swig","hash":"b782eb2e34c0c15440837040b5d65b093ab6ec04","modified":1593857338981},{"_id":"themes/next/layout/_third-party/index.swig","hash":"70c3c01dd181de81270c57f3d99b6d8f4c723404","modified":1593857338983},{"_id":"themes/next/layout/_third-party/quicklink.swig","hash":"311e5eceec9e949f1ea8d623b083cec0b8700ff2","modified":1593857338984},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"2731e262a6b88eaee2a3ca61e6a3583a7f594702","modified":1593857338984},{"_id":"themes/next/scripts/events/index.js","hash":"5743cde07f3d2aa11532a168a652e52ec28514fd","modified":1593857338989},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"aec50ed57b9d5d3faf2db3c88374f107203617e0","modified":1593857338992},{"_id":"themes/next/scripts/filters/front-matter.js","hash":"703bdd142a671b4b67d3d9dfb4a19d1dd7e7e8f7","modified":1593857338992},{"_id":"themes/next/scripts/filters/locals.js","hash":"b193a936ee63451f09f8886343dcfdca577c0141","modified":1593857338993},{"_id":"themes/next/scripts/filters/minify.js","hash":"19985723b9f677ff775f3b17dcebf314819a76ac","modified":1593857338993},{"_id":"themes/next/scripts/filters/post.js","hash":"44ba9b1c0bdda57590b53141306bb90adf0678db","modified":1593857338993},{"_id":"themes/next/scripts/helpers/engine.js","hash":"bdb424c3cc0d145bd0c6015bb1d2443c8a9c6cda","modified":1593857338993},{"_id":"themes/next/scripts/helpers/font.js","hash":"40cf00e9f2b7aa6e5f33d412e03ed10304b15fd7","modified":1593857338994},{"_id":"themes/next/scripts/helpers/next-config.js","hash":"5e11f30ddb5093a88a687446617a46b048fa02e5","modified":1593857338994},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"958e86b2bd24e4fdfcbf9ce73e998efe3491a71f","modified":1593857338994},{"_id":"themes/next/scripts/tags/button.js","hash":"8c6b45f36e324820c919a822674703769e6da32c","modified":1593857338994},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"94e0bbc7999b359baa42fa3731bdcf89c79ae2b3","modified":1593857338995},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"f1826ade2d135e2f60e2d95cb035383685b3370c","modified":1593857338995},{"_id":"themes/next/scripts/tags/label.js","hash":"fc5b267d903facb7a35001792db28b801cccb1f8","modified":1593857338995},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"d902fd313e8d35c3cc36f237607c2a0536c9edf1","modified":1593857338995},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"983c6c4adea86160ecc0ba2204bc312aa338121d","modified":1593857338996},{"_id":"themes/next/scripts/tags/note.js","hash":"0a02bb4c15aec41f6d5f1271cdb5c65889e265d9","modified":1593857338996},{"_id":"themes/next/scripts/tags/pdf.js","hash":"8c613b39e7bff735473e35244b5629d02ee20618","modified":1593857338996},{"_id":"themes/next/scripts/tags/tabs.js","hash":"93d8a734a3035c1d3f04933167b500517557ba3e","modified":1593857338996},{"_id":"themes/next/scripts/tags/video.js","hash":"e5ff4c44faee604dd3ea9db6b222828c4750c227","modified":1593857338996},{"_id":"themes/next/source/css/_colors.styl","hash":"a8442520f719d3d7a19811cb3b85bcfd4a596e1f","modified":1593857338997},{"_id":"themes/next/source/css/_mixins.styl","hash":"e31a557f8879c2f4d8d5567ee1800b3e03f91f6e","modified":1593857339023},{"_id":"themes/next/source/css/main.styl","hash":"a3a3bbb5a973052f0186b3523911cb2539ff7b88","modified":1593857339029},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1593857339030},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1593857339030},{"_id":"themes/next/source/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1593857339030},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1593857339031},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1593857339031},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1593857339031},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1593857339032},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1593857339032},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1593857339033},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1593857339032},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1593857339033},{"_id":"themes/next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1593857339033},{"_id":"themes/next/source/js/algolia-search.js","hash":"498d233eb5c7af6940baf94c1a1c36fdf1dd2636","modified":1593857339033},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1593857339033},{"_id":"themes/next/source/js/bookmark.js","hash":"9734ebcb9b83489686f5c2da67dc9e6157e988ad","modified":1593857339034},{"_id":"themes/next/source/js/next-boot.js","hash":"a1b0636423009d4a4e4cea97bcbf1842bfab582c","modified":1593857339034},{"_id":"themes/next/source/js/motion.js","hash":"72df86f6dfa29cce22abeff9d814c9dddfcf13a9","modified":1593857339034},{"_id":"themes/next/source/js/local-search.js","hash":"35ccf100d8f9c0fd6bfbb7fa88c2a76c42a69110","modified":1593857339034},{"_id":"themes/next/source/js/utils.js","hash":"2c6e6b4d9a592fbb4bf04689524db2cdfcd94ca7","modified":1593857339035},{"_id":"themes/next/source/lib/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1593857339036},{"_id":"themes/next/source/images/avatar.jpg","hash":"e7980d215c86bd4ac681991ae0d6ac2f526d3824","modified":1593859327541},{"_id":"themes/next/.git_bak/refs/heads/master","hash":"7b5894d5fc28d7797285dac4f43134462f6c7c5d","modified":1593857338934},{"_id":"themes/next/layout/_partials/head/head-unique.swig","hash":"000bad572d76ee95d9c0a78f9ccdc8d97cc7d4b4","modified":1593857338966},{"_id":"themes/next/layout/_partials/header/brand.swig","hash":"c70f8e71e026e878a4e9d5ab3bbbf9b0b23c240c","modified":1593857338966},{"_id":"themes/next/layout/_partials/header/index.swig","hash":"7dbe93b8297b746afb89700b4d29289556e85267","modified":1593857338967},{"_id":"themes/next/layout/_partials/head/head.swig","hash":"810d544019e4a8651b756dd23e5592ee851eda71","modified":1593857338966},{"_id":"themes/next/layout/_partials/header/menu-item.swig","hash":"9440d8a3a181698b80e1fa47f5104f4565d8cdf3","modified":1593857338967},{"_id":"themes/next/layout/_partials/header/menu.swig","hash":"d31f896680a6c2f2c3f5128b4d4dd46c87ce2130","modified":1593857338967},{"_id":"themes/next/layout/_partials/header/sub-menu.swig","hash":"ae2261bea836581918a1c2b0d1028a78718434e0","modified":1593857338968},{"_id":"themes/next/layout/_partials/page/breadcrumb.swig","hash":"c851717497ca64789f2176c9ecd1dedab237b752","modified":1593857338968},{"_id":"themes/next/layout/_partials/page/page-header.swig","hash":"9b7a66791d7822c52117fe167612265356512477","modified":1593857338969},{"_id":"themes/next/layout/_partials/post/post-related.swig","hash":"f79c44692451db26efce704813f7a8872b7e63a0","modified":1593857338975},{"_id":"themes/next/layout/_partials/post/post-copyright.swig","hash":"954ad71536b6eb08bd1f30ac6e2f5493b69d1c04","modified":1593857338974},{"_id":"themes/next/layout/_partials/post/post-footer.swig","hash":"8f14f3f8a1b2998d5114cc56b680fb5c419a6b07","modified":1593857338974},{"_id":"themes/next/layout/_partials/post/post-followme.swig","hash":"ceba16b9bd3a0c5c8811af7e7e49d0f9dcb2f41e","modified":1593857338974},{"_id":"themes/next/layout/_partials/search/algolia-search.swig","hash":"48430bd03b8f19c9b8cdb2642005ed67d56c6e0b","modified":1593857338975},{"_id":"themes/next/layout/_partials/search/index.swig","hash":"2be50f9bfb1c56b85b3b6910a7df27f51143632c","modified":1593857338975},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"f48a6a8eba04eb962470ce76dd731e13074d4c45","modified":1593857338976},{"_id":"themes/next/layout/_scripts/pages/schedule.swig","hash":"077b5d66f6309f2e7dcf08645058ff2e03143e6c","modified":1593857338977},{"_id":"themes/next/layout/_partials/sidebar/site-overview.swig","hash":"c46849e0af8f8fb78baccd40d2af14df04a074af","modified":1593857338976},{"_id":"themes/next/layout/_partials/post/post-reward.swig","hash":"2b1a73556595c37951e39574df5a3f20b2edeaef","modified":1593857338975},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"1c910fc066c06d5fbbe9f2b0c47447539e029af7","modified":1593857338978},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"7f14ef43d9e82bc1efc204c5adf0b1dbfc919a9f","modified":1593857338978},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"1c910fc066c06d5fbbe9f2b0c47447539e029af7","modified":1593857338979},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"7f14ef43d9e82bc1efc204c5adf0b1dbfc919a9f","modified":1593857338978},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"4790058691b7d36cf6d2d6b4e93795a7b8d608ad","modified":1593857338980},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"2fa2b51d56bfac6a1ea76d651c93b9c20b01c09b","modified":1593857338980},{"_id":"themes/next/layout/_third-party/analytics/growingio.swig","hash":"5adea065641e8c55994dd2328ddae53215604928","modified":1593857338980},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"1472cabb0181f60a6a0b7fec8899a4d03dfb2040","modified":1593857338980},{"_id":"themes/next/layout/_third-party/chat/chatra.swig","hash":"f910618292c63871ca2e6c6e66c491f344fa7b1f","modified":1593857338981},{"_id":"themes/next/layout/_third-party/chat/tidio.swig","hash":"cba0e6e0fad08568a9e74ba9a5bee5341cfc04c1","modified":1593857338981},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"f39a5bf3ce9ee9adad282501235e0c588e4356ec","modified":1593857338982},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"b14908644225d78c864cd0a9b60c52407de56183","modified":1593857338982},{"_id":"themes/next/layout/_third-party/comments/disqusjs.swig","hash":"82f5b6822aa5ec958aa987b101ef860494c6cf1f","modified":1593857338982},{"_id":"themes/next/layout/_third-party/comments/gitalk.swig","hash":"d6ceb70648555338a80ae5724b778c8c58d7060d","modified":1593857338982},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"f7a9eca599a682479e8ca863db59be7c9c7508c8","modified":1593857338982},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"be0a8eccf1f6dc21154af297fc79555343031277","modified":1593857338983},{"_id":"themes/next/layout/_third-party/math/katex.swig","hash":"4791c977a730f29c846efcf6c9c15131b9400ead","modified":1593857338983},{"_id":"themes/next/layout/_third-party/math/index.swig","hash":"6c5976621efd5db5f7c4c6b4f11bc79d6554885f","modified":1593857338983},{"_id":"themes/next/layout/_third-party/math/mathjax.swig","hash":"ecf751321e799f0fb3bf94d049e535130e2547aa","modified":1593857338984},{"_id":"themes/next/layout/_third-party/search/algolia-search.swig","hash":"d35a999d67f4c302f76fdf13744ceef3c6506481","modified":1593857338984},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"767b6c714c22588bcd26ba70b0fc19b6810cbacd","modified":1593857338985},{"_id":"themes/next/layout/_third-party/search/swiftype.swig","hash":"ba0dbc06b9d244073a1c681ff7a722dcbf920b51","modified":1593857338985},{"_id":"themes/next/layout/_third-party/statistics/busuanzi-counter.swig","hash":"4b1986e43d6abce13450d2b41a736dd6a5620a10","modified":1593857338985},{"_id":"themes/next/layout/_third-party/statistics/cnzz-analytics.swig","hash":"a17ace37876822327a2f9306a472974442c9005d","modified":1593857338986},{"_id":"themes/next/layout/_third-party/statistics/firestore.swig","hash":"b26ac2bfbe91dd88267f8b96aee6bb222b265b7a","modified":1593857338986},{"_id":"themes/next/layout/_third-party/statistics/lean-analytics.swig","hash":"d56d5af427cdfecc33a0f62ee62c056b4e33d095","modified":1593857338986},{"_id":"themes/next/layout/_third-party/statistics/index.swig","hash":"5f6a966c509680dbfa70433f9d658cee59c304d7","modified":1593857338986},{"_id":"themes/next/layout/_third-party/tags/mermaid.swig","hash":"f3c43664a071ff3c0b28bd7e59b5523446829576","modified":1593857338987},{"_id":"themes/next/layout/_third-party/tags/pdf.swig","hash":"d30b0e255a8092043bac46441243f943ed6fb09b","modified":1593857338987},{"_id":"themes/next/scripts/events/lib/config.js","hash":"d34c6040b13649714939f59be5175e137de65ede","modified":1593857338989},{"_id":"themes/next/scripts/events/lib/injects-point.js","hash":"6661c1c91c7cbdefc6a5e6a034b443b8811235a1","modified":1593857338989},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"f233d8d0103ae7f9b861344aa65c1a3c1de8a845","modified":1593857338990},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"a54708fd9309b4357c423a3730eb67f395344a5e","modified":1593857338990},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"2486f3e0150c753e5f3af1a3665d074704b8ee2c","modified":1593857338990},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"7f2d93af012c1e14b8596fecbfc7febb43d9b7f5","modified":1593857338991},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"4c0c99c7e0f00849003dfce02a131104fb671137","modified":1593857338991},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"7f8b92913d21070b489457fa5ed996d2a55f2c32","modified":1593857338991},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"e51dc3072c1ba0ea3008f09ecae8b46242ec6021","modified":1593857338991},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"d5fefc31fba4ab0188305b1af1feb61da49fdeb0","modified":1593857338992},{"_id":"themes/next/scripts/filters/comment/valine.js","hash":"6cbd85f9433c06bae22225ccf75ac55e04f2d106","modified":1593857338992},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"612ec843372dae709acb17112c1145a53450cc59","modified":1593857339029},{"_id":"themes/next/source/css/_variables/base.styl","hash":"3ff1998af930bbddb029ef288ecfb76466a01211","modified":1593859539203},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"f4e694e5db81e57442c7e34505a416d818b3044a","modified":1593857339028},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"f70be8e229da7e1715c11dd0e975a2e71e453ac8","modified":1593857339028},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"62df49459d552bbf73841753da8011a1f5e875c8","modified":1593857339028},{"_id":"themes/next/source/js/schemes/pisces.js","hash":"0ac5ce155bc58c972fe21c4c447f85e6f8755c62","modified":1593857339035},{"_id":"themes/next/source/js/schemes/muse.js","hash":"1eb9b88103ddcf8827b1a7cbc56471a9c5592d53","modified":1593857339035},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1593857339039},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1593857339039},{"_id":"themes/next/.git_bak/logs/refs/heads/master","hash":"c6061cb06758c3c5ad7af34c0db7588ca51dcdf7","modified":1593857338935},{"_id":"themes/next/.git_bak/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1593857338932},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"a47725574e1bee3bc3b63b0ff2039cc982b17eff","modified":1593857338998},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"8e7b57a72e757cf95278239641726bb2d5b869d1","modified":1593857338999},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"ca5e70662dcfb261c25191cc5db5084dcf661c76","modified":1593857338998},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"2e3bf7baf383c9073ec5e67f157d3cb3823c0957","modified":1593857339008},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"a1690e035b505d28bdef2b4424c13fc6312ab049","modified":1593857339015},{"_id":"themes/next/source/css/_common/outline/mobile.styl","hash":"681d33e3bc85bdca407d93b134c089264837378c","modified":1593857339014},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"0b2c4b78eead410020d7c4ded59c75592a648df8","modified":1593857339018},{"_id":"themes/next/source/css/_common/scaffolding/comments.styl","hash":"b1f0fab7344a20ed6748b04065b141ad423cf4d9","modified":1593857339018},{"_id":"themes/next/source/css/_common/scaffolding/buttons.styl","hash":"a2e9e00962e43e98ec2614d6d248ef1773bb9b78","modified":1593857339018},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"b56367ea676ea8e8783ea89cd4ab150c7da7a060","modified":1593857339020},{"_id":"themes/next/source/css/_common/scaffolding/pagination.styl","hash":"8f58570a1bbc34c4989a47a1b7d42a8030f38b06","modified":1593857339020},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"523fb7b653b87ae37fc91fc8813e4ffad87b0d7e","modified":1593857339021},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"18ce72d90459c9aa66910ac64eae115f2dde3767","modified":1593857339021},{"_id":"themes/next/source/css/_common/scaffolding/toggles.styl","hash":"179e33b8ac7f4d8a8e76736a7e4f965fe9ab8b42","modified":1593857339023},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"7785bd756e0c4acede3a47fec1ed7b55988385a5","modified":1593857339024},{"_id":"themes/next/source/css/_schemes/Mist/_layout.styl","hash":"bb7ace23345364eb14983e860a7172e1683a4c94","modified":1593857339024},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"f6516d0f7d89dc7b6c6e143a5af54b926f585d82","modified":1593857339024},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"7104b9cef90ca3b140d7a7afcf15540a250218fc","modified":1593857339025},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"a717969829fa6ef88225095737df3f8ee86c286b","modified":1593857339025},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"6136da4bbb7e70cec99f5c7ae8c7e74f5e7c261a","modified":1593857339025},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"4d1c17345d2d39ef7698f7acf82dfc0f59308c34","modified":1593857339025},{"_id":"themes/next/source/css/_schemes/Muse/_header.styl","hash":"f0131db6275ceaecae7e1a6a3798b8f89f6c850d","modified":1593857339025},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"93db5dafe9294542a6b5f647643cb9deaced8e06","modified":1593857339026},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"2b2e7b5cea7783c9c8bb92655e26a67c266886f0","modified":1593857339026},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1593857339026},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"70a4324b70501132855b5e59029acfc5d3da1ebd","modified":1593857339027},{"_id":"themes/next/source/css/_schemes/Pisces/_header.styl","hash":"e282df938bd029f391c466168d0e68389978f120","modified":1593857339027},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"85da2f3006f4bef9a2199416ecfab4d288f848c4","modified":1593857339027},{"_id":"themes/next/source/css/_schemes/Muse/_sub-menu.styl","hash":"c48ccd8d6651fe1a01faff8f01179456d39ba9b1","modified":1593857339026},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"44f47c88c06d89d06f220f102649057118715828","modified":1593857339027},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1593857339028},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"e740deadcfc4f29c5cb01e40f9df6277262ba4e3","modified":1593857339027},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"260bb01acd44d88dcb7f501a238ab968f86bef9e","modified":1593857339038},{"_id":"themes/next/source/lib/font-awesome/css/all.min.css","hash":"0038dc97c79451578b7bd48af60ba62282b4082b","modified":1593857339036},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"75a88815c47a249eadb5f0edc1675957f860cca7","modified":1593857339038},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"509988477da79c146cb93fb728405f18e923c2de","modified":1593857339037},{"_id":"themes/next/.git_bak/logs/refs/remotes/origin/HEAD","hash":"c6061cb06758c3c5ad7af34c0db7588ca51dcdf7","modified":1593857338932},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"fafc96c86926b22afba8bb9418c05e6afbc05a57","modified":1593857338999},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"2bd0eb1512415325653b26d62a4463e6de83c5ac","modified":1593857339000},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1593857339000},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"d21d4ac1982c13d02f125a67c065412085a92ff2","modified":1593857339001},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"e771dcb0b4673e063c0f3e2d73e7336ac05bcd57","modified":1593857339001},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"e75693f33dbc92afc55489438267869ae2f3db54","modified":1593857339002},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"902569a9dea90548bec21a823dd3efd94ff7c133","modified":1593857339003},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"f49ca072b5a800f735e8f01fc3518f885951dd8e","modified":1593857339003},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"ded41fd9d20a5e8db66aaff7cc50f105f5ef2952","modified":1593857339004},{"_id":"themes/next/source/css/_common/components/post/post-header.styl","hash":"65cb6edb69e94e70e3291e9132408361148d41d5","modified":1593857339005},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"72d495a88f7d6515af425c12cbc67308a57d88ea","modified":1593857339005},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"6a97bcfa635d637dc59005be3b931109e0d1ead5","modified":1593857339005},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"f5c2788a78790aca1a2f37f7149d6058afb539e0","modified":1593857339007},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"d114b2a531129e739a27ba6271cfe6857aa9a865","modified":1593857339006},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"5b5649b9749e3fd8b63aef22ceeece0a6e1df605","modified":1593857339007},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"a760ee83ba6216871a9f14c5e56dc9bd0d9e2103","modified":1593857339008},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"99e12c9ce3d14d4837e3d3f12fc867ba9c565317","modified":1593857339007},{"_id":"themes/next/source/css/_common/components/post/post-followme.styl","hash":"1e4190c10c9e0c9ce92653b0dbcec21754b0b69d","modified":1593857339004},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"8a7fc03a568b95be8d3337195e38bc7ec5ba2b23","modified":1593857339009},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"9a878d0119785a2316f42aebcceaa05a120b9a7a","modified":1593857339011},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"e2992846b39bf3857b5104675af02ba73e72eed5","modified":1593857339010},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"b49e9fbd3c182b8fc066b8c2caf248e3eb748619","modified":1593857339009},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"9f0b93d109c9aec79450c8a0cf4a4eab717d674d","modified":1593857339010},{"_id":"themes/next/source/css/_common/outline/header/bookmark.styl","hash":"e2d606f1ac343e9be4f15dbbaf3464bc4df8bf81","modified":1593857339012},{"_id":"themes/next/source/css/_common/outline/footer/footer.styl","hash":"454a4aebfabb4469b92a8cbb49f46c49ac9bf165","modified":1593857339012},{"_id":"themes/next/source/css/_common/outline/header/github-banner.styl","hash":"e7a9fdb6478b8674b1cdf94de4f8052843fb71d9","modified":1593857339013},{"_id":"themes/next/source/css/_common/outline/header/header.styl","hash":"a793cfff86ad4af818faef04c18013077873f8f0","modified":1593857339013},{"_id":"themes/next/source/css/_common/outline/header/headerband.styl","hash":"0caf32492692ba8e854da43697a2ec8a41612194","modified":1593857339013},{"_id":"themes/next/source/css/_common/outline/header/menu.styl","hash":"5f432a6ed9ca80a413c68b00e93d4a411abf280a","modified":1593857339013},{"_id":"themes/next/source/css/_common/outline/header/site-nav.styl","hash":"b2fc519828fe89a1f8f03ff7b809ad68cd46f3d7","modified":1593857339014},{"_id":"themes/next/source/css/_common/outline/header/site-meta.styl","hash":"45a239edca44acecf971d99b04f30a1aafbf6906","modified":1593857339014},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"2cb1876e9e0c9ac32160888af27b1178dbcb0616","modified":1593857339015},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"fa0222197b5eee47e18ac864cdc6eac75678b8fe","modified":1593857339015},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"44487d9ab290dc97871fa8dd4487016deb56e123","modified":1593857339016},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"1f0e7fbe80956f47087c2458ea880acf7a83078b","modified":1593857339016},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"a960a2dd587b15d3b3fe1b59525d6fa971c6a6ec","modified":1593857339016},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-dimmer.styl","hash":"9b479c2f9a9bfed77885e5093b8245cc5d768ec7","modified":1593857339016},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"a05a4031e799bc864a4536f9ef61fe643cd421af","modified":1593857339017},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"b3220db827e1adbca7880c2bb23e78fa7cbe95cb","modified":1593857339017},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar.styl","hash":"a9cd93c36bae5af9223e7804963096274e8a4f03","modified":1593857339017},{"_id":"themes/next/source/css/_common/outline/sidebar/site-state.styl","hash":"2a47f8a6bb589c2fb635e6c1e4a2563c7f63c407","modified":1593857339018},{"_id":"themes/next/source/css/_common/scaffolding/highlight/diff.styl","hash":"d3f73688bb7423e3ab0de1efdf6db46db5e34f80","modified":1593857339019},{"_id":"themes/next/source/css/_common/scaffolding/highlight/highlight.styl","hash":"35c871a809afa8306c8cde13651010e282548bc6","modified":1593857339019},{"_id":"themes/next/source/css/_common/scaffolding/highlight/theme.styl","hash":"3b3acc5caa0b95a2598bef4eeacb21bab21bea56","modified":1593857339020},{"_id":"themes/next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"f71a3e86c05ea668b008cf05a81f67d92b6d65e4","modified":1593857339019},{"_id":"themes/next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"1d2778ca5aeeeafaa690dc2766b01b352ab76a02","modified":1593857339021},{"_id":"themes/next/source/css/_common/scaffolding/tags/label.styl","hash":"d7fce4b51b5f4b7c31d93a9edb6c6ce740aa0d6b","modified":1593857339022},{"_id":"themes/next/source/css/_common/scaffolding/tags/note.styl","hash":"e4d9a77ffe98e851c1202676940097ba28253313","modified":1593857339022},{"_id":"themes/next/source/css/_common/scaffolding/tags/tabs.styl","hash":"f23670f1d8e749f3e83766d446790d8fd9620278","modified":1593857339023},{"_id":"themes/next/source/css/_common/scaffolding/tags/tags.styl","hash":"9e4c0653cfd3cc6908fa0d97581bcf80861fb1e7","modified":1593857339023},{"_id":"themes/next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"709d10f763e357e1472d6471f8be384ec9e2d983","modified":1593857339022},{"_id":"themes/next/source/css/_common/scaffolding/tags/pdf.styl","hash":"b49c64f8e9a6ca1c45c0ba98febf1974fdd03616","modified":1593857339022},{"_id":"themes/next/.git_bak/objects/pack/pack-86e2565862baf23d3242d9762d7e9890da3bd718.idx","hash":"c2f6240fb7b9c8e09988b3960493fdad157ad6e9","modified":1593857338911},{"_id":"themes/next/.git_bak/objects/pack/pack-86e2565862baf23d3242d9762d7e9890da3bd718.pack","hash":"ce1356563957c2df9e5122a60ede12756fab94ce","modified":1593857338903},{"_id":"public/archives/index.html","hash":"28acbd44d5539129d2162bd0dc57701f3724e716","modified":1594738403388},{"_id":"public/categories/index.html","hash":"7acb06f832eba8b2a41cb786ace823a4e1b4604e","modified":1594738403388},{"_id":"public/tags/index.html","hash":"7dadaa89b574a2d7af9bc5fed0ed368598731e1e","modified":1594738403388},{"_id":"public/categories/数据库/index.html","hash":"27fff96f1112063008d745c71b3e46e83ce7b71f","modified":1594738403388},{"_id":"public/archives/2020/index.html","hash":"ab1df25ce7b1ddb570a8e07ca49909574d5b27e8","modified":1594738403388},{"_id":"public/archives/2020/07/index.html","hash":"77f2cea6d1e240838e9f7b2453f55a4e65415e97","modified":1594738403388},{"_id":"public/tags/数据库/index.html","hash":"ec2e4af60c16ac38df5096812806424f601dcdfe","modified":1594738403388},{"_id":"public/tags/事务/index.html","hash":"f9a60c64aa6d0435b984179dda8bbcc40f1d70ef","modified":1594738403388},{"_id":"public/2020/07/13/transaction-intro/index.html","hash":"cb4153c6dce7123720458365fc62181b76b2a903","modified":1594738403388},{"_id":"public/2020/07/04/sql-execute/index.html","hash":"fbcd11091fff3a295d58d7b54623b4b2c2c3b0bf","modified":1594738403388},{"_id":"public/2020/07/04/menu/index.html","hash":"1bead206288cfe25eaf7689336e9d7cf816397e7","modified":1594738403388},{"_id":"public/index.html","hash":"89b17c0a73dd67c6de372fd55d81fb8904f96194","modified":1594738403388},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1594738403388},{"_id":"public/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1594738403388},{"_id":"public/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1594738403388},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1594738403388},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1594738403388},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1594738403388},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1594738403388},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1594738403388},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1594738403388},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1594738403388},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1594738403388},{"_id":"public/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1594738403388},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1594738403388},{"_id":"public/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"260bb01acd44d88dcb7f501a238ab968f86bef9e","modified":1594738403388},{"_id":"public/images/sql-execute-1.jpg","hash":"de7bb4171af4fac85259ef6a229c6c8fd4cd245c","modified":1594738403388},{"_id":"public/images/avatar.jpg","hash":"e7980d215c86bd4ac681991ae0d6ac2f526d3824","modified":1594738403388},{"_id":"public/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"75a88815c47a249eadb5f0edc1675957f860cca7","modified":1594738403388},{"_id":"public/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"509988477da79c146cb93fb728405f18e923c2de","modified":1594738403388},{"_id":"public/js/algolia-search.js","hash":"498d233eb5c7af6940baf94c1a1c36fdf1dd2636","modified":1594738403388},{"_id":"public/js/bookmark.js","hash":"9734ebcb9b83489686f5c2da67dc9e6157e988ad","modified":1594738403388},{"_id":"public/js/next-boot.js","hash":"a1b0636423009d4a4e4cea97bcbf1842bfab582c","modified":1594738403388},{"_id":"public/js/motion.js","hash":"72df86f6dfa29cce22abeff9d814c9dddfcf13a9","modified":1594738403388},{"_id":"public/js/utils.js","hash":"2c6e6b4d9a592fbb4bf04689524db2cdfcd94ca7","modified":1594738403388},{"_id":"public/js/local-search.js","hash":"35ccf100d8f9c0fd6bfbb7fa88c2a76c42a69110","modified":1594738403388},{"_id":"public/js/schemes/muse.js","hash":"1eb9b88103ddcf8827b1a7cbc56471a9c5592d53","modified":1594738403388},{"_id":"public/js/schemes/pisces.js","hash":"0ac5ce155bc58c972fe21c4c447f85e6f8755c62","modified":1594738403388},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1594738403388},{"_id":"public/css/main.css","hash":"0aba84031d083bd280057c5c8391bc582b029985","modified":1594738403388},{"_id":"public/lib/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1594738403388},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1594738403388},{"_id":"public/lib/font-awesome/css/all.min.css","hash":"0038dc97c79451578b7bd48af60ba62282b4082b","modified":1594738403388}],"Category":[{"name":"数据库","_id":"ckcm22joy0002n2gm36rv1oim"}],"Data":[],"Page":[{"title":"archives","date":"2020-07-04T03:27:53.000Z","_content":"","source":"archives/index.md","raw":"---\ntitle: archives\ndate: 2020-07-04 11:27:53\n---\n","updated":"2020-07-04T04:50:40.368Z","path":"archives/index.html","comments":1,"layout":"page","_id":"ckcm22jq2000bn2gm61f8blpj","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"分类","date":"2020-07-04T06:10:13.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ndate: 2020-07-04 14:10:13\ntype: \"categories\"\n---\n","updated":"2020-07-04T11:18:32.927Z","path":"categories/index.html","comments":1,"layout":"page","_id":"ckcm22jq3000cn2gm80foau50","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"标签","date":"2020-07-04T03:22:07.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2020-07-04 11:22:07\ntype: \"tags\"\n---\n","updated":"2020-07-04T11:19:15.878Z","path":"tags/index.html","comments":1,"layout":"page","_id":"ckcm22jq4000dn2gmdlu2buqe","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"一条SQL的执行过程","date":"2020-07-04T11:22:11.000Z","_content":"\n现代数据库是一个复杂的系统工程，但是一个典型的数据库系统都是由固定的部分组成，本文以一条 SQL 的执行过程作为入口，对数据库系统的全貌进行一个简单介绍。\n\n## 整体架构\n\n如图所示是一个关系型数据库系统的简单架构图，可以看到数据系系统是一个典型的 CS 架构。以 MySQL 为例，一个典型的数据库系统通常由两部分组成：Server 和 Storage Engine。Server 层按照功能划分又可以分为：连接处理（Connection handler）、语法解析（Parser）、优化器（Optimizer）、执行器（Executor）等部分。Storage Engine 也可以有不同的实现方式。\n\n<!-- more -->\n\n<img src=\"/images/sql-execute-1.jpg\" width=\"68%\" title=\"数据库架构图\" alt=\"MySQL架构\"/>\n\n## SQL 执行过程\n\n还是以 MySQL 为例，介绍一条 SQL 的完整执行过程，其它关系型数据库的执行过程与 MySQL 基本类似。\n\n### 连接处理\n\nMySQL 客户端和服务端之间支持多种通信方式，除了最常用的 TCP 通讯外，还支持命名管道和共享内存的方式。以 TCP 通讯为例，MySQL 客户端与服务端的交互主要分为两个阶段：握手认证阶段和命令执行阶段。一次正常的连接过程如下：\n\n```sql\n# 1. 建立 TCP 连接\n\n# 2. 建立 MySQL 连接，协议认证\n\n# 3. 认证通过，等待执行命令\n\n# 4. 断开 MySQL 连接\n\n# 5. 断开 TCP 连接\n```\n\n其中，协议认证过程阶段就会对连接进行 ACL 认证，具体的认证过程和逻辑在此不作过多介绍，认证通过之后，就可以开始正式执行命令了。关于 MySQL 通讯协议的更多介绍，可以参考[这篇文章](https://jin-yang.github.io/post/mysql-protocol.html)。\n\n### 语法解析\n\nSQL 语法的设计也是数据库流行的一个重要原因，相比于传统的检索方式，SQL 语法可以说是相当的简单而且可读性高。SQL 语法有一个语法标准，但是各个数据库在实现的时候都会有自己的特点，以 MySQL 为例，MySQL 也只是兼容了部分 SQL 标准，对此社区有一个[说明](https://dev.mysql.com/doc/refman/8.0/en/compatibility.html)。\n\n语法解析阶段其实包括了：词法分析和语法分析。当前最常用的语法解析方案是 [LEX & YACC](http://dinosaur.compilertools.net/) 的方案，这也是数据库系统里面用的最多的方案。MySQL 采用了一种比较有趣的组合，MySQL 并没有直接使用 LEX 作为词法分析的方案，而是手写了一套词法分析逻辑，但是语法分析依然采用了 YACC。关于 MySQL 语法解析的逻辑，后面会再写一篇文章来进行介绍。需要知道的是：语法解析过程会生成一棵语法树（Lex tree），原始 SQL 中的所有信息都会被记录在这棵树中。\n\n注意：并不是所有的语句都需要经过语法解析的阶段，MySQL 内部实现了一套 Query Cache 机制，针对查询语句进行缓存，当缓存命中时，可以直接返回结果，此时不需要经过语法解析。\n\n### 优化器\n\n顾名思义，优化器的目的就是对用户的查询语句进行优化，找到一个合理的执行计划。之所以说是合理的执行计划，因为优化器本身并不保证所有的执行计划是最优的，而是尽量找到一个可以接受的执行计划。近些年，随着数据的膨胀和数据库本身的发展，对于优化器的研究也变得越来越热门，传统的 OLTP 型数据库也开始借鉴 OLAP 型数据库的优化思路。回到优化器本身，其要做的事情是：确定数据的读取方式和数据的计算方式。\n\n一个最简单的例子，在使用数据库的过程中，当查询很慢的时候，DBA 首先会告诉你的就是：“看一下有没有有索引”。这里面索引的选择就是优化器的工作。\n\n### 执行器\n\n和优化器对应，执行器的工作是执行数据的读取和计算。和存储引擎的交互也都是在执行器内完成。在开始执行前，MySQL 会首先检查一下执行权限，如果没有对应表的权限，会直接返回没有权限的错误。如果有权限，则会根据表的引擎类型，按照优化器生成的执行计划，调用具体的接口进行处理。\n\n### 存储引擎\n\nMySQL 在设计之初就是一个支持多引擎的结构，MySQL 在执行器层定义了一个 handler 接口，接口内描述了所有执行器需要用到的基本操作，所有的存储引擎都需要实现相应的接口。常用的存储引擎包括：MyISAM、InnoDB、CSV、RocksDB等。多引擎的设计确实让 MySQL 拥有了很好的可扩展性，用户可以根据需要在表级指定存储引擎。但是随着 InnoDB 成为 MySQL  的默认引擎，特别是 8.0 版本开始使用 InnoDB 保存数据字典，这种多引擎的支持也会慢慢退出历史舞台。\n\n以上结合数据库的基本架构简单介绍了一条 SQL 的执行过程，当然实际的执行过程远比这个复杂，后续会对各个部分展开说明。","source":"_posts/sql-execute.md","raw":"---\ntitle: 一条SQL的执行过程\ndate: 2020-07-04 19:22:11\ntags:\n- 数据库\ncategories: \n- 数据库\n---\n\n现代数据库是一个复杂的系统工程，但是一个典型的数据库系统都是由固定的部分组成，本文以一条 SQL 的执行过程作为入口，对数据库系统的全貌进行一个简单介绍。\n\n## 整体架构\n\n如图所示是一个关系型数据库系统的简单架构图，可以看到数据系系统是一个典型的 CS 架构。以 MySQL 为例，一个典型的数据库系统通常由两部分组成：Server 和 Storage Engine。Server 层按照功能划分又可以分为：连接处理（Connection handler）、语法解析（Parser）、优化器（Optimizer）、执行器（Executor）等部分。Storage Engine 也可以有不同的实现方式。\n\n<!-- more -->\n\n<img src=\"/images/sql-execute-1.jpg\" width=\"68%\" title=\"数据库架构图\" alt=\"MySQL架构\"/>\n\n## SQL 执行过程\n\n还是以 MySQL 为例，介绍一条 SQL 的完整执行过程，其它关系型数据库的执行过程与 MySQL 基本类似。\n\n### 连接处理\n\nMySQL 客户端和服务端之间支持多种通信方式，除了最常用的 TCP 通讯外，还支持命名管道和共享内存的方式。以 TCP 通讯为例，MySQL 客户端与服务端的交互主要分为两个阶段：握手认证阶段和命令执行阶段。一次正常的连接过程如下：\n\n```sql\n# 1. 建立 TCP 连接\n\n# 2. 建立 MySQL 连接，协议认证\n\n# 3. 认证通过，等待执行命令\n\n# 4. 断开 MySQL 连接\n\n# 5. 断开 TCP 连接\n```\n\n其中，协议认证过程阶段就会对连接进行 ACL 认证，具体的认证过程和逻辑在此不作过多介绍，认证通过之后，就可以开始正式执行命令了。关于 MySQL 通讯协议的更多介绍，可以参考[这篇文章](https://jin-yang.github.io/post/mysql-protocol.html)。\n\n### 语法解析\n\nSQL 语法的设计也是数据库流行的一个重要原因，相比于传统的检索方式，SQL 语法可以说是相当的简单而且可读性高。SQL 语法有一个语法标准，但是各个数据库在实现的时候都会有自己的特点，以 MySQL 为例，MySQL 也只是兼容了部分 SQL 标准，对此社区有一个[说明](https://dev.mysql.com/doc/refman/8.0/en/compatibility.html)。\n\n语法解析阶段其实包括了：词法分析和语法分析。当前最常用的语法解析方案是 [LEX & YACC](http://dinosaur.compilertools.net/) 的方案，这也是数据库系统里面用的最多的方案。MySQL 采用了一种比较有趣的组合，MySQL 并没有直接使用 LEX 作为词法分析的方案，而是手写了一套词法分析逻辑，但是语法分析依然采用了 YACC。关于 MySQL 语法解析的逻辑，后面会再写一篇文章来进行介绍。需要知道的是：语法解析过程会生成一棵语法树（Lex tree），原始 SQL 中的所有信息都会被记录在这棵树中。\n\n注意：并不是所有的语句都需要经过语法解析的阶段，MySQL 内部实现了一套 Query Cache 机制，针对查询语句进行缓存，当缓存命中时，可以直接返回结果，此时不需要经过语法解析。\n\n### 优化器\n\n顾名思义，优化器的目的就是对用户的查询语句进行优化，找到一个合理的执行计划。之所以说是合理的执行计划，因为优化器本身并不保证所有的执行计划是最优的，而是尽量找到一个可以接受的执行计划。近些年，随着数据的膨胀和数据库本身的发展，对于优化器的研究也变得越来越热门，传统的 OLTP 型数据库也开始借鉴 OLAP 型数据库的优化思路。回到优化器本身，其要做的事情是：确定数据的读取方式和数据的计算方式。\n\n一个最简单的例子，在使用数据库的过程中，当查询很慢的时候，DBA 首先会告诉你的就是：“看一下有没有有索引”。这里面索引的选择就是优化器的工作。\n\n### 执行器\n\n和优化器对应，执行器的工作是执行数据的读取和计算。和存储引擎的交互也都是在执行器内完成。在开始执行前，MySQL 会首先检查一下执行权限，如果没有对应表的权限，会直接返回没有权限的错误。如果有权限，则会根据表的引擎类型，按照优化器生成的执行计划，调用具体的接口进行处理。\n\n### 存储引擎\n\nMySQL 在设计之初就是一个支持多引擎的结构，MySQL 在执行器层定义了一个 handler 接口，接口内描述了所有执行器需要用到的基本操作，所有的存储引擎都需要实现相应的接口。常用的存储引擎包括：MyISAM、InnoDB、CSV、RocksDB等。多引擎的设计确实让 MySQL 拥有了很好的可扩展性，用户可以根据需要在表级指定存储引擎。但是随着 InnoDB 成为 MySQL  的默认引擎，特别是 8.0 版本开始使用 InnoDB 保存数据字典，这种多引擎的支持也会慢慢退出历史舞台。\n\n以上结合数据库的基本架构简单介绍了一条 SQL 的执行过程，当然实际的执行过程远比这个复杂，后续会对各个部分展开说明。","slug":"sql-execute","published":1,"updated":"2020-07-12T13:25:19.430Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckcm22joq0000n2gm6y3i0o9k","content":"<p>现代数据库是一个复杂的系统工程，但是一个典型的数据库系统都是由固定的部分组成，本文以一条 SQL 的执行过程作为入口，对数据库系统的全貌进行一个简单介绍。</p>\n<h2 id=\"整体架构\"><a href=\"#整体架构\" class=\"headerlink\" title=\"整体架构\"></a>整体架构</h2><p>如图所示是一个关系型数据库系统的简单架构图，可以看到数据系系统是一个典型的 CS 架构。以 MySQL 为例，一个典型的数据库系统通常由两部分组成：Server 和 Storage Engine。Server 层按照功能划分又可以分为：连接处理（Connection handler）、语法解析（Parser）、优化器（Optimizer）、执行器（Executor）等部分。Storage Engine 也可以有不同的实现方式。</p>\n<a id=\"more\"></a>\n\n<img src=\"/images/sql-execute-1.jpg\" width=\"68%\" title=\"数据库架构图\" alt=\"MySQL架构\"/>\n\n<h2 id=\"SQL-执行过程\"><a href=\"#SQL-执行过程\" class=\"headerlink\" title=\"SQL 执行过程\"></a>SQL 执行过程</h2><p>还是以 MySQL 为例，介绍一条 SQL 的完整执行过程，其它关系型数据库的执行过程与 MySQL 基本类似。</p>\n<h3 id=\"连接处理\"><a href=\"#连接处理\" class=\"headerlink\" title=\"连接处理\"></a>连接处理</h3><p>MySQL 客户端和服务端之间支持多种通信方式，除了最常用的 TCP 通讯外，还支持命名管道和共享内存的方式。以 TCP 通讯为例，MySQL 客户端与服务端的交互主要分为两个阶段：握手认证阶段和命令执行阶段。一次正常的连接过程如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1. 建立 TCP 连接</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2. 建立 MySQL 连接，协议认证</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3. 认证通过，等待执行命令</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4. 断开 MySQL 连接</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 5. 断开 TCP 连接</span></span><br></pre></td></tr></table></figure>\n\n<p>其中，协议认证过程阶段就会对连接进行 ACL 认证，具体的认证过程和逻辑在此不作过多介绍，认证通过之后，就可以开始正式执行命令了。关于 MySQL 通讯协议的更多介绍，可以参考<a href=\"https://jin-yang.github.io/post/mysql-protocol.html\" target=\"_blank\" rel=\"noopener\">这篇文章</a>。</p>\n<h3 id=\"语法解析\"><a href=\"#语法解析\" class=\"headerlink\" title=\"语法解析\"></a>语法解析</h3><p>SQL 语法的设计也是数据库流行的一个重要原因，相比于传统的检索方式，SQL 语法可以说是相当的简单而且可读性高。SQL 语法有一个语法标准，但是各个数据库在实现的时候都会有自己的特点，以 MySQL 为例，MySQL 也只是兼容了部分 SQL 标准，对此社区有一个<a href=\"https://dev.mysql.com/doc/refman/8.0/en/compatibility.html\" target=\"_blank\" rel=\"noopener\">说明</a>。</p>\n<p>语法解析阶段其实包括了：词法分析和语法分析。当前最常用的语法解析方案是 <a href=\"http://dinosaur.compilertools.net/\" target=\"_blank\" rel=\"noopener\">LEX &amp; YACC</a> 的方案，这也是数据库系统里面用的最多的方案。MySQL 采用了一种比较有趣的组合，MySQL 并没有直接使用 LEX 作为词法分析的方案，而是手写了一套词法分析逻辑，但是语法分析依然采用了 YACC。关于 MySQL 语法解析的逻辑，后面会再写一篇文章来进行介绍。需要知道的是：语法解析过程会生成一棵语法树（Lex tree），原始 SQL 中的所有信息都会被记录在这棵树中。</p>\n<p>注意：并不是所有的语句都需要经过语法解析的阶段，MySQL 内部实现了一套 Query Cache 机制，针对查询语句进行缓存，当缓存命中时，可以直接返回结果，此时不需要经过语法解析。</p>\n<h3 id=\"优化器\"><a href=\"#优化器\" class=\"headerlink\" title=\"优化器\"></a>优化器</h3><p>顾名思义，优化器的目的就是对用户的查询语句进行优化，找到一个合理的执行计划。之所以说是合理的执行计划，因为优化器本身并不保证所有的执行计划是最优的，而是尽量找到一个可以接受的执行计划。近些年，随着数据的膨胀和数据库本身的发展，对于优化器的研究也变得越来越热门，传统的 OLTP 型数据库也开始借鉴 OLAP 型数据库的优化思路。回到优化器本身，其要做的事情是：确定数据的读取方式和数据的计算方式。</p>\n<p>一个最简单的例子，在使用数据库的过程中，当查询很慢的时候，DBA 首先会告诉你的就是：“看一下有没有有索引”。这里面索引的选择就是优化器的工作。</p>\n<h3 id=\"执行器\"><a href=\"#执行器\" class=\"headerlink\" title=\"执行器\"></a>执行器</h3><p>和优化器对应，执行器的工作是执行数据的读取和计算。和存储引擎的交互也都是在执行器内完成。在开始执行前，MySQL 会首先检查一下执行权限，如果没有对应表的权限，会直接返回没有权限的错误。如果有权限，则会根据表的引擎类型，按照优化器生成的执行计划，调用具体的接口进行处理。</p>\n<h3 id=\"存储引擎\"><a href=\"#存储引擎\" class=\"headerlink\" title=\"存储引擎\"></a>存储引擎</h3><p>MySQL 在设计之初就是一个支持多引擎的结构，MySQL 在执行器层定义了一个 handler 接口，接口内描述了所有执行器需要用到的基本操作，所有的存储引擎都需要实现相应的接口。常用的存储引擎包括：MyISAM、InnoDB、CSV、RocksDB等。多引擎的设计确实让 MySQL 拥有了很好的可扩展性，用户可以根据需要在表级指定存储引擎。但是随着 InnoDB 成为 MySQL  的默认引擎，特别是 8.0 版本开始使用 InnoDB 保存数据字典，这种多引擎的支持也会慢慢退出历史舞台。</p>\n<p>以上结合数据库的基本架构简单介绍了一条 SQL 的执行过程，当然实际的执行过程远比这个复杂，后续会对各个部分展开说明。</p>\n","site":{"data":{}},"excerpt":"<p>现代数据库是一个复杂的系统工程，但是一个典型的数据库系统都是由固定的部分组成，本文以一条 SQL 的执行过程作为入口，对数据库系统的全貌进行一个简单介绍。</p>\n<h2 id=\"整体架构\"><a href=\"#整体架构\" class=\"headerlink\" title=\"整体架构\"></a>整体架构</h2><p>如图所示是一个关系型数据库系统的简单架构图，可以看到数据系系统是一个典型的 CS 架构。以 MySQL 为例，一个典型的数据库系统通常由两部分组成：Server 和 Storage Engine。Server 层按照功能划分又可以分为：连接处理（Connection handler）、语法解析（Parser）、优化器（Optimizer）、执行器（Executor）等部分。Storage Engine 也可以有不同的实现方式。</p>","more":"<img src=\"/images/sql-execute-1.jpg\" width=\"68%\" title=\"数据库架构图\" alt=\"MySQL架构\"/>\n\n<h2 id=\"SQL-执行过程\"><a href=\"#SQL-执行过程\" class=\"headerlink\" title=\"SQL 执行过程\"></a>SQL 执行过程</h2><p>还是以 MySQL 为例，介绍一条 SQL 的完整执行过程，其它关系型数据库的执行过程与 MySQL 基本类似。</p>\n<h3 id=\"连接处理\"><a href=\"#连接处理\" class=\"headerlink\" title=\"连接处理\"></a>连接处理</h3><p>MySQL 客户端和服务端之间支持多种通信方式，除了最常用的 TCP 通讯外，还支持命名管道和共享内存的方式。以 TCP 通讯为例，MySQL 客户端与服务端的交互主要分为两个阶段：握手认证阶段和命令执行阶段。一次正常的连接过程如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1. 建立 TCP 连接</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2. 建立 MySQL 连接，协议认证</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3. 认证通过，等待执行命令</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4. 断开 MySQL 连接</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 5. 断开 TCP 连接</span></span><br></pre></td></tr></table></figure>\n\n<p>其中，协议认证过程阶段就会对连接进行 ACL 认证，具体的认证过程和逻辑在此不作过多介绍，认证通过之后，就可以开始正式执行命令了。关于 MySQL 通讯协议的更多介绍，可以参考<a href=\"https://jin-yang.github.io/post/mysql-protocol.html\" target=\"_blank\" rel=\"noopener\">这篇文章</a>。</p>\n<h3 id=\"语法解析\"><a href=\"#语法解析\" class=\"headerlink\" title=\"语法解析\"></a>语法解析</h3><p>SQL 语法的设计也是数据库流行的一个重要原因，相比于传统的检索方式，SQL 语法可以说是相当的简单而且可读性高。SQL 语法有一个语法标准，但是各个数据库在实现的时候都会有自己的特点，以 MySQL 为例，MySQL 也只是兼容了部分 SQL 标准，对此社区有一个<a href=\"https://dev.mysql.com/doc/refman/8.0/en/compatibility.html\" target=\"_blank\" rel=\"noopener\">说明</a>。</p>\n<p>语法解析阶段其实包括了：词法分析和语法分析。当前最常用的语法解析方案是 <a href=\"http://dinosaur.compilertools.net/\" target=\"_blank\" rel=\"noopener\">LEX &amp; YACC</a> 的方案，这也是数据库系统里面用的最多的方案。MySQL 采用了一种比较有趣的组合，MySQL 并没有直接使用 LEX 作为词法分析的方案，而是手写了一套词法分析逻辑，但是语法分析依然采用了 YACC。关于 MySQL 语法解析的逻辑，后面会再写一篇文章来进行介绍。需要知道的是：语法解析过程会生成一棵语法树（Lex tree），原始 SQL 中的所有信息都会被记录在这棵树中。</p>\n<p>注意：并不是所有的语句都需要经过语法解析的阶段，MySQL 内部实现了一套 Query Cache 机制，针对查询语句进行缓存，当缓存命中时，可以直接返回结果，此时不需要经过语法解析。</p>\n<h3 id=\"优化器\"><a href=\"#优化器\" class=\"headerlink\" title=\"优化器\"></a>优化器</h3><p>顾名思义，优化器的目的就是对用户的查询语句进行优化，找到一个合理的执行计划。之所以说是合理的执行计划，因为优化器本身并不保证所有的执行计划是最优的，而是尽量找到一个可以接受的执行计划。近些年，随着数据的膨胀和数据库本身的发展，对于优化器的研究也变得越来越热门，传统的 OLTP 型数据库也开始借鉴 OLAP 型数据库的优化思路。回到优化器本身，其要做的事情是：确定数据的读取方式和数据的计算方式。</p>\n<p>一个最简单的例子，在使用数据库的过程中，当查询很慢的时候，DBA 首先会告诉你的就是：“看一下有没有有索引”。这里面索引的选择就是优化器的工作。</p>\n<h3 id=\"执行器\"><a href=\"#执行器\" class=\"headerlink\" title=\"执行器\"></a>执行器</h3><p>和优化器对应，执行器的工作是执行数据的读取和计算。和存储引擎的交互也都是在执行器内完成。在开始执行前，MySQL 会首先检查一下执行权限，如果没有对应表的权限，会直接返回没有权限的错误。如果有权限，则会根据表的引擎类型，按照优化器生成的执行计划，调用具体的接口进行处理。</p>\n<h3 id=\"存储引擎\"><a href=\"#存储引擎\" class=\"headerlink\" title=\"存储引擎\"></a>存储引擎</h3><p>MySQL 在设计之初就是一个支持多引擎的结构，MySQL 在执行器层定义了一个 handler 接口，接口内描述了所有执行器需要用到的基本操作，所有的存储引擎都需要实现相应的接口。常用的存储引擎包括：MyISAM、InnoDB、CSV、RocksDB等。多引擎的设计确实让 MySQL 拥有了很好的可扩展性，用户可以根据需要在表级指定存储引擎。但是随着 InnoDB 成为 MySQL  的默认引擎，特别是 8.0 版本开始使用 InnoDB 保存数据字典，这种多引擎的支持也会慢慢退出历史舞台。</p>\n<p>以上结合数据库的基本架构简单介绍了一条 SQL 的执行过程，当然实际的执行过程远比这个复杂，后续会对各个部分展开说明。</p>"},{"title":"总(Li)体(Xia)说明(Flag)","date":"2020-07-04T04:06:18.000Z","_content":"声明：本文档仅作为个人学习过程中的总结与归纳，如果存在错误或者不严谨的描述，欢迎拍砖。\n\n## 整体说明\n\n整个文档包括但是不限于以下内容：\n\n- 数据库管理系统 (DataBase Management System)\n- 分布式系统 (Distributed System)\n- 操作系统 (Operating System)\n- 网络与并行处理 (Network and Parallel Processing)\n- 编程语言 (Program Language)\n- 算法与数据结构 (Algorithm and Data Structure)\n- 其它 (Others)\n\n<!-- more -->\n\n文档的整理和更新过程比较佛系，希望自己能够长期坚持 : )\n\n### 数据库系统\n\n最早接触数据库是在大学课堂，学校的数据库课程更侧重数据库的使用，当然也有一些数据库的理论介绍，但是体感并不强烈。至少笔者在学完数据库课程之后，留下的印象就只有以下几个关键字：SQL、事务、ACID。随着最近一两年更多的接触数据库，才开始慢慢对数据库有了更多的了解，也希望自己的一些体会能够帮助更多的人认识数据库。\n\n数据库的基础知识这一部分，暂定会从以下几个方面进行介绍：\n\n- 数据库系统与文件系统\n- 一条 SQL 的执行过程\n- 索引与 B-tree 介绍\n- 事务系统\n- Redo 和 Undo\n- 关于 DDL 的说明\n- BufferPool 介绍\n- 高可用与读写分离\n- 存储计算分离\n\n### 分布式系统\n\n分布式系统可以说是最近几年 IT 领域最热门的词汇之一，好像所有的应用系统，不带上“分布式”都显得不够逼格。这里也谈谈自己对分布式系统的一点浅薄的理解：\n\n- Scale Up or Scale Out\n- Paxos and Raft\n- 分布式数据库\n- 分布式文件系统\n\n### 操作系统\n\n不管在什么版本的程序猿鄙视链条中，操作系统内核程序猿永远都是位于顶端的那一拨，由此可见操作系统的重要性，关于操作系统的介绍，完全是结合遇到的问题展开，谈不上深入了解，只能算是一个记录：\n\n- Page Cache\n- IO 模型\n- mmap 的一点说明\n- 神奇的 fork\n- 系统监控\n- VFS 虚拟文件系统\n\n### 网络与并行处理\n\n从理论和实践两个维度对网络相关的知识作一个总结：\n\n- 网络七层\n- 三次握手\n- tcp 与 socket\n- http 与 https\n- pool and epool\n- react 反应堆模式\n- Netty 入门\n- Mycat 介绍\n\n### 编程语言\n\n本人接触的编程语言不算多，迄今为止重度使用的包括：Java、Python、C++。不同的语言有不同的特点，也有一些想通的地方，本部分的文章主要记录编程语言中的一些重要特征和注意事项：\n\n- 面向对象\n- Java 中的并发包\n- C++ 之指针\n- Python = 慢 ？\n- C++ STL\n- 容器类的使用\n- 多线程\n- 同步与异步\n- 生产者与消费者\n- 设计模式\n- 内存管理\n- 常用的测试框架\n\n### 算法与数据结构\n\n这部分会记录一些常见算法与数据结构，当然也包括LeetCode的随笔，内容随缘。\n\n### 其它\n\n所有不能归为上面类型的都放到这里了，包括一些常见的工具使用：\n\n- perf 使用\n- tcpdump 使用\n- wireshark 使用\n- gdb 使用\n- pdb 使用\n- git 使用总结\n- vim 使用总结\n- cgroup 介绍\n- docker 介绍\n\n以上就是本文档的一个总体说明，Flag 已经立下了，希望自己能够坚持。","source":"_posts/menu.md","raw":"---\ntitle: 总(Li)体(Xia)说明(Flag)\ndate: 2020-07-04 12:06:18\n---\n声明：本文档仅作为个人学习过程中的总结与归纳，如果存在错误或者不严谨的描述，欢迎拍砖。\n\n## 整体说明\n\n整个文档包括但是不限于以下内容：\n\n- 数据库管理系统 (DataBase Management System)\n- 分布式系统 (Distributed System)\n- 操作系统 (Operating System)\n- 网络与并行处理 (Network and Parallel Processing)\n- 编程语言 (Program Language)\n- 算法与数据结构 (Algorithm and Data Structure)\n- 其它 (Others)\n\n<!-- more -->\n\n文档的整理和更新过程比较佛系，希望自己能够长期坚持 : )\n\n### 数据库系统\n\n最早接触数据库是在大学课堂，学校的数据库课程更侧重数据库的使用，当然也有一些数据库的理论介绍，但是体感并不强烈。至少笔者在学完数据库课程之后，留下的印象就只有以下几个关键字：SQL、事务、ACID。随着最近一两年更多的接触数据库，才开始慢慢对数据库有了更多的了解，也希望自己的一些体会能够帮助更多的人认识数据库。\n\n数据库的基础知识这一部分，暂定会从以下几个方面进行介绍：\n\n- 数据库系统与文件系统\n- 一条 SQL 的执行过程\n- 索引与 B-tree 介绍\n- 事务系统\n- Redo 和 Undo\n- 关于 DDL 的说明\n- BufferPool 介绍\n- 高可用与读写分离\n- 存储计算分离\n\n### 分布式系统\n\n分布式系统可以说是最近几年 IT 领域最热门的词汇之一，好像所有的应用系统，不带上“分布式”都显得不够逼格。这里也谈谈自己对分布式系统的一点浅薄的理解：\n\n- Scale Up or Scale Out\n- Paxos and Raft\n- 分布式数据库\n- 分布式文件系统\n\n### 操作系统\n\n不管在什么版本的程序猿鄙视链条中，操作系统内核程序猿永远都是位于顶端的那一拨，由此可见操作系统的重要性，关于操作系统的介绍，完全是结合遇到的问题展开，谈不上深入了解，只能算是一个记录：\n\n- Page Cache\n- IO 模型\n- mmap 的一点说明\n- 神奇的 fork\n- 系统监控\n- VFS 虚拟文件系统\n\n### 网络与并行处理\n\n从理论和实践两个维度对网络相关的知识作一个总结：\n\n- 网络七层\n- 三次握手\n- tcp 与 socket\n- http 与 https\n- pool and epool\n- react 反应堆模式\n- Netty 入门\n- Mycat 介绍\n\n### 编程语言\n\n本人接触的编程语言不算多，迄今为止重度使用的包括：Java、Python、C++。不同的语言有不同的特点，也有一些想通的地方，本部分的文章主要记录编程语言中的一些重要特征和注意事项：\n\n- 面向对象\n- Java 中的并发包\n- C++ 之指针\n- Python = 慢 ？\n- C++ STL\n- 容器类的使用\n- 多线程\n- 同步与异步\n- 生产者与消费者\n- 设计模式\n- 内存管理\n- 常用的测试框架\n\n### 算法与数据结构\n\n这部分会记录一些常见算法与数据结构，当然也包括LeetCode的随笔，内容随缘。\n\n### 其它\n\n所有不能归为上面类型的都放到这里了，包括一些常见的工具使用：\n\n- perf 使用\n- tcpdump 使用\n- wireshark 使用\n- gdb 使用\n- pdb 使用\n- git 使用总结\n- vim 使用总结\n- cgroup 介绍\n- docker 介绍\n\n以上就是本文档的一个总体说明，Flag 已经立下了，希望自己能够坚持。","slug":"menu","published":1,"updated":"2020-07-04T11:38:33.781Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckcm22jow0001n2gm34c40su9","content":"<p>声明：本文档仅作为个人学习过程中的总结与归纳，如果存在错误或者不严谨的描述，欢迎拍砖。</p>\n<h2 id=\"整体说明\"><a href=\"#整体说明\" class=\"headerlink\" title=\"整体说明\"></a>整体说明</h2><p>整个文档包括但是不限于以下内容：</p>\n<ul>\n<li>数据库管理系统 (DataBase Management System)</li>\n<li>分布式系统 (Distributed System)</li>\n<li>操作系统 (Operating System)</li>\n<li>网络与并行处理 (Network and Parallel Processing)</li>\n<li>编程语言 (Program Language)</li>\n<li>算法与数据结构 (Algorithm and Data Structure)</li>\n<li>其它 (Others)</li>\n</ul>\n<a id=\"more\"></a>\n\n<p>文档的整理和更新过程比较佛系，希望自己能够长期坚持 : )</p>\n<h3 id=\"数据库系统\"><a href=\"#数据库系统\" class=\"headerlink\" title=\"数据库系统\"></a>数据库系统</h3><p>最早接触数据库是在大学课堂，学校的数据库课程更侧重数据库的使用，当然也有一些数据库的理论介绍，但是体感并不强烈。至少笔者在学完数据库课程之后，留下的印象就只有以下几个关键字：SQL、事务、ACID。随着最近一两年更多的接触数据库，才开始慢慢对数据库有了更多的了解，也希望自己的一些体会能够帮助更多的人认识数据库。</p>\n<p>数据库的基础知识这一部分，暂定会从以下几个方面进行介绍：</p>\n<ul>\n<li>数据库系统与文件系统</li>\n<li>一条 SQL 的执行过程</li>\n<li>索引与 B-tree 介绍</li>\n<li>事务系统</li>\n<li>Redo 和 Undo</li>\n<li>关于 DDL 的说明</li>\n<li>BufferPool 介绍</li>\n<li>高可用与读写分离</li>\n<li>存储计算分离</li>\n</ul>\n<h3 id=\"分布式系统\"><a href=\"#分布式系统\" class=\"headerlink\" title=\"分布式系统\"></a>分布式系统</h3><p>分布式系统可以说是最近几年 IT 领域最热门的词汇之一，好像所有的应用系统，不带上“分布式”都显得不够逼格。这里也谈谈自己对分布式系统的一点浅薄的理解：</p>\n<ul>\n<li>Scale Up or Scale Out</li>\n<li>Paxos and Raft</li>\n<li>分布式数据库</li>\n<li>分布式文件系统</li>\n</ul>\n<h3 id=\"操作系统\"><a href=\"#操作系统\" class=\"headerlink\" title=\"操作系统\"></a>操作系统</h3><p>不管在什么版本的程序猿鄙视链条中，操作系统内核程序猿永远都是位于顶端的那一拨，由此可见操作系统的重要性，关于操作系统的介绍，完全是结合遇到的问题展开，谈不上深入了解，只能算是一个记录：</p>\n<ul>\n<li>Page Cache</li>\n<li>IO 模型</li>\n<li>mmap 的一点说明</li>\n<li>神奇的 fork</li>\n<li>系统监控</li>\n<li>VFS 虚拟文件系统</li>\n</ul>\n<h3 id=\"网络与并行处理\"><a href=\"#网络与并行处理\" class=\"headerlink\" title=\"网络与并行处理\"></a>网络与并行处理</h3><p>从理论和实践两个维度对网络相关的知识作一个总结：</p>\n<ul>\n<li>网络七层</li>\n<li>三次握手</li>\n<li>tcp 与 socket</li>\n<li>http 与 https</li>\n<li>pool and epool</li>\n<li>react 反应堆模式</li>\n<li>Netty 入门</li>\n<li>Mycat 介绍</li>\n</ul>\n<h3 id=\"编程语言\"><a href=\"#编程语言\" class=\"headerlink\" title=\"编程语言\"></a>编程语言</h3><p>本人接触的编程语言不算多，迄今为止重度使用的包括：Java、Python、C++。不同的语言有不同的特点，也有一些想通的地方，本部分的文章主要记录编程语言中的一些重要特征和注意事项：</p>\n<ul>\n<li>面向对象</li>\n<li>Java 中的并发包</li>\n<li>C++ 之指针</li>\n<li>Python = 慢 ？</li>\n<li>C++ STL</li>\n<li>容器类的使用</li>\n<li>多线程</li>\n<li>同步与异步</li>\n<li>生产者与消费者</li>\n<li>设计模式</li>\n<li>内存管理</li>\n<li>常用的测试框架</li>\n</ul>\n<h3 id=\"算法与数据结构\"><a href=\"#算法与数据结构\" class=\"headerlink\" title=\"算法与数据结构\"></a>算法与数据结构</h3><p>这部分会记录一些常见算法与数据结构，当然也包括LeetCode的随笔，内容随缘。</p>\n<h3 id=\"其它\"><a href=\"#其它\" class=\"headerlink\" title=\"其它\"></a>其它</h3><p>所有不能归为上面类型的都放到这里了，包括一些常见的工具使用：</p>\n<ul>\n<li>perf 使用</li>\n<li>tcpdump 使用</li>\n<li>wireshark 使用</li>\n<li>gdb 使用</li>\n<li>pdb 使用</li>\n<li>git 使用总结</li>\n<li>vim 使用总结</li>\n<li>cgroup 介绍</li>\n<li>docker 介绍</li>\n</ul>\n<p>以上就是本文档的一个总体说明，Flag 已经立下了，希望自己能够坚持。</p>\n","site":{"data":{}},"excerpt":"<p>声明：本文档仅作为个人学习过程中的总结与归纳，如果存在错误或者不严谨的描述，欢迎拍砖。</p>\n<h2 id=\"整体说明\"><a href=\"#整体说明\" class=\"headerlink\" title=\"整体说明\"></a>整体说明</h2><p>整个文档包括但是不限于以下内容：</p>\n<ul>\n<li>数据库管理系统 (DataBase Management System)</li>\n<li>分布式系统 (Distributed System)</li>\n<li>操作系统 (Operating System)</li>\n<li>网络与并行处理 (Network and Parallel Processing)</li>\n<li>编程语言 (Program Language)</li>\n<li>算法与数据结构 (Algorithm and Data Structure)</li>\n<li>其它 (Others)</li>\n</ul>","more":"<p>文档的整理和更新过程比较佛系，希望自己能够长期坚持 : )</p>\n<h3 id=\"数据库系统\"><a href=\"#数据库系统\" class=\"headerlink\" title=\"数据库系统\"></a>数据库系统</h3><p>最早接触数据库是在大学课堂，学校的数据库课程更侧重数据库的使用，当然也有一些数据库的理论介绍，但是体感并不强烈。至少笔者在学完数据库课程之后，留下的印象就只有以下几个关键字：SQL、事务、ACID。随着最近一两年更多的接触数据库，才开始慢慢对数据库有了更多的了解，也希望自己的一些体会能够帮助更多的人认识数据库。</p>\n<p>数据库的基础知识这一部分，暂定会从以下几个方面进行介绍：</p>\n<ul>\n<li>数据库系统与文件系统</li>\n<li>一条 SQL 的执行过程</li>\n<li>索引与 B-tree 介绍</li>\n<li>事务系统</li>\n<li>Redo 和 Undo</li>\n<li>关于 DDL 的说明</li>\n<li>BufferPool 介绍</li>\n<li>高可用与读写分离</li>\n<li>存储计算分离</li>\n</ul>\n<h3 id=\"分布式系统\"><a href=\"#分布式系统\" class=\"headerlink\" title=\"分布式系统\"></a>分布式系统</h3><p>分布式系统可以说是最近几年 IT 领域最热门的词汇之一，好像所有的应用系统，不带上“分布式”都显得不够逼格。这里也谈谈自己对分布式系统的一点浅薄的理解：</p>\n<ul>\n<li>Scale Up or Scale Out</li>\n<li>Paxos and Raft</li>\n<li>分布式数据库</li>\n<li>分布式文件系统</li>\n</ul>\n<h3 id=\"操作系统\"><a href=\"#操作系统\" class=\"headerlink\" title=\"操作系统\"></a>操作系统</h3><p>不管在什么版本的程序猿鄙视链条中，操作系统内核程序猿永远都是位于顶端的那一拨，由此可见操作系统的重要性，关于操作系统的介绍，完全是结合遇到的问题展开，谈不上深入了解，只能算是一个记录：</p>\n<ul>\n<li>Page Cache</li>\n<li>IO 模型</li>\n<li>mmap 的一点说明</li>\n<li>神奇的 fork</li>\n<li>系统监控</li>\n<li>VFS 虚拟文件系统</li>\n</ul>\n<h3 id=\"网络与并行处理\"><a href=\"#网络与并行处理\" class=\"headerlink\" title=\"网络与并行处理\"></a>网络与并行处理</h3><p>从理论和实践两个维度对网络相关的知识作一个总结：</p>\n<ul>\n<li>网络七层</li>\n<li>三次握手</li>\n<li>tcp 与 socket</li>\n<li>http 与 https</li>\n<li>pool and epool</li>\n<li>react 反应堆模式</li>\n<li>Netty 入门</li>\n<li>Mycat 介绍</li>\n</ul>\n<h3 id=\"编程语言\"><a href=\"#编程语言\" class=\"headerlink\" title=\"编程语言\"></a>编程语言</h3><p>本人接触的编程语言不算多，迄今为止重度使用的包括：Java、Python、C++。不同的语言有不同的特点，也有一些想通的地方，本部分的文章主要记录编程语言中的一些重要特征和注意事项：</p>\n<ul>\n<li>面向对象</li>\n<li>Java 中的并发包</li>\n<li>C++ 之指针</li>\n<li>Python = 慢 ？</li>\n<li>C++ STL</li>\n<li>容器类的使用</li>\n<li>多线程</li>\n<li>同步与异步</li>\n<li>生产者与消费者</li>\n<li>设计模式</li>\n<li>内存管理</li>\n<li>常用的测试框架</li>\n</ul>\n<h3 id=\"算法与数据结构\"><a href=\"#算法与数据结构\" class=\"headerlink\" title=\"算法与数据结构\"></a>算法与数据结构</h3><p>这部分会记录一些常见算法与数据结构，当然也包括LeetCode的随笔，内容随缘。</p>\n<h3 id=\"其它\"><a href=\"#其它\" class=\"headerlink\" title=\"其它\"></a>其它</h3><p>所有不能归为上面类型的都放到这里了，包括一些常见的工具使用：</p>\n<ul>\n<li>perf 使用</li>\n<li>tcpdump 使用</li>\n<li>wireshark 使用</li>\n<li>gdb 使用</li>\n<li>pdb 使用</li>\n<li>git 使用总结</li>\n<li>vim 使用总结</li>\n<li>cgroup 介绍</li>\n<li>docker 介绍</li>\n</ul>\n<p>以上就是本文档的一个总体说明，Flag 已经立下了，希望自己能够坚持。</p>"},{"title":"初识事务","date":"2020-07-13T15:03:15.000Z","_content":"\n提到数据库，相信很多人第一个想到的就是事务，今天就从事务开始，对数据库的基本特征以及背后的实现逻辑进行一个简单的说明。\n\n## 事务\n\n在写这篇文章的时候，笔者特意又重新查了下事务的定义。维基百科中关于事务的定义是：“事务是数据库系统执行过程中的一个逻辑单位，由一个有限的数据库操作序列构成”。事务的概念本身并没有什么好展开的，事务之所以成为数据库系统最重要的特征之一，是因为事务的 ACID 属性。\n\n<!-- more -->\n\n### ACID\n\n**Atomicity（原子性）** ：事务中的一组操作，要么全部成功，要么全部失败，不存在部分成功的情况。原子性的定义相对是比较直观的，可以类比编程语言中的原子操作，从这个角度上来说，事务是数据库系统处理用户操作的最小单位（自动提交模式可以看作是一条语句一个事务）。数据库系统内部主要通过 Undo（回滚日志、前进项）来保证原子性。每一个操作在执行时，都会记录下执行前的状态到 Undo 中，当事务需要回滚时，就可以通过 Undo 恢复到事务执行前的状态。\n\n**Consistency（一致性）** ：数据库总是从一个一致性状态转移到另一个一致性状态。一致性的定义比较模糊，什么叫从一个一致性状态转移到另一个一致性状态？其实这是由于中文的翻译往往只翻译了一半，关于一致性有一段非常最要的补充：\n\n```shell\nAny data written to the database must be valid according to all defined rules, \nincluding constraints, cascades, triggers, and any combination thereof. \n```\n\n总结起来就是：数据库在任意时刻的状态都必须符合所有的验证规则。一个简单的例子：表A记录了用户的账户余额，表B记录了用户的消费记录。从数据库的角度，A中的值与B中记录的和应该总是一个固定值，这就是一条验证规则。另外一个例子：表A存了用户信息，表B存了地址信息，表B中的地址被表A引用（外键），那么删除表B中的记录时，必须检查表A中的记录，这也是一条验证规则。关于一致性的判断，更多的需要与关系间的内在逻辑相结合。\n\n**Isolation（隔离性）** ：不同事务间的操作是相互隔离的，一个事务的操作不受其他事务的影响，也不会影响其他事务。关于隔离性，不同的数据库有不同的实现逻辑，按照可见性进行划分，可以分为四种不同的隔离级别。关于隔离级别，下个部分会进行详细介绍。\n\n**Durability（持久性）** ：一个事务只要提交成功就必须完整保存，不管发生任何软件或者硬件故障都必须保证数据不会丢失。持久性可以说是数据库系统的基础，在真实的业务场景中，数据丢失也往往是最无法容忍的。数据库系统主要通过 Redo（重做日志、后进项）来保证持久性。Redo 是一种典型的 WAL，每一个操作在执行时，都会记录这个操作的内容，并持久化到 Redo 中。当系统恢复时，如果发现之前的操作没有生效，可以通过 Redo 进行重做，保证已提交的操作有效。\n\n### 事务隔离级别\n\n前面提到，按照可见性进行划分，隔离性可以分为四种不同的事务隔离级别，下面逐一进行说明。\n\n**Read Uncommit（读未提交）** ：一个事务的修改可以立即被其它事务读取。读未提交的问题是会出现脏读，举例来说：事务1修改表A的数据，未提交，此时事务2读到了修改项，随后事务1进行了回滚。读未提交是最弱的一种隔离级别，在生产环境中，基本上不会使用。\n\n**Read Committed（读已提交）** ：一个事务的修改在事务提交后可以立即被其它事务读取到。读已提交避免了脏读的问题，这也是当前主流的数据库默认的事务隔离级别。\n\n**Repeatable Read（可重复读）** ：一个事务内部，前后多次的查询结果保持一致。回到隔离性的定义：一个事务的操作不受其他事务的影响。可重复读要解决的就是这个问题。在内部实现上，不管是读已提交还是可重复读，都需要借助 Readview 和 Undo 来实现，只是开启 Readview 的时间点有区别。Readview 和 Undo 也是 MySQL 实现 MVCC 的基础，更多细节在后续的文章单独介绍。\n\n**Serializable（串行化）** ：所有的事务，按顺序执行，任意时刻最多只有一个事务在执行。串行化从本质上来说完全限制了并发，在真实环境中一般不会使用。\n\n### 总结\n\n这篇文章主要从事务入手，简单的介绍了事务的基本特性和实现逻辑，引入了数据库系统中几个非常重要的概念：Undo、Redo、Readview、MVCC。这些概念会在后续的文章中详细说明。\n\n","source":"_posts/transaction-intro.md","raw":"---\ntitle: 初识事务\ndate: 2020-07-13 23:03:15\ntags:\n- 事务\ncategories: \n- 数据库\n\n---\n\n提到数据库，相信很多人第一个想到的就是事务，今天就从事务开始，对数据库的基本特征以及背后的实现逻辑进行一个简单的说明。\n\n## 事务\n\n在写这篇文章的时候，笔者特意又重新查了下事务的定义。维基百科中关于事务的定义是：“事务是数据库系统执行过程中的一个逻辑单位，由一个有限的数据库操作序列构成”。事务的概念本身并没有什么好展开的，事务之所以成为数据库系统最重要的特征之一，是因为事务的 ACID 属性。\n\n<!-- more -->\n\n### ACID\n\n**Atomicity（原子性）** ：事务中的一组操作，要么全部成功，要么全部失败，不存在部分成功的情况。原子性的定义相对是比较直观的，可以类比编程语言中的原子操作，从这个角度上来说，事务是数据库系统处理用户操作的最小单位（自动提交模式可以看作是一条语句一个事务）。数据库系统内部主要通过 Undo（回滚日志、前进项）来保证原子性。每一个操作在执行时，都会记录下执行前的状态到 Undo 中，当事务需要回滚时，就可以通过 Undo 恢复到事务执行前的状态。\n\n**Consistency（一致性）** ：数据库总是从一个一致性状态转移到另一个一致性状态。一致性的定义比较模糊，什么叫从一个一致性状态转移到另一个一致性状态？其实这是由于中文的翻译往往只翻译了一半，关于一致性有一段非常最要的补充：\n\n```shell\nAny data written to the database must be valid according to all defined rules, \nincluding constraints, cascades, triggers, and any combination thereof. \n```\n\n总结起来就是：数据库在任意时刻的状态都必须符合所有的验证规则。一个简单的例子：表A记录了用户的账户余额，表B记录了用户的消费记录。从数据库的角度，A中的值与B中记录的和应该总是一个固定值，这就是一条验证规则。另外一个例子：表A存了用户信息，表B存了地址信息，表B中的地址被表A引用（外键），那么删除表B中的记录时，必须检查表A中的记录，这也是一条验证规则。关于一致性的判断，更多的需要与关系间的内在逻辑相结合。\n\n**Isolation（隔离性）** ：不同事务间的操作是相互隔离的，一个事务的操作不受其他事务的影响，也不会影响其他事务。关于隔离性，不同的数据库有不同的实现逻辑，按照可见性进行划分，可以分为四种不同的隔离级别。关于隔离级别，下个部分会进行详细介绍。\n\n**Durability（持久性）** ：一个事务只要提交成功就必须完整保存，不管发生任何软件或者硬件故障都必须保证数据不会丢失。持久性可以说是数据库系统的基础，在真实的业务场景中，数据丢失也往往是最无法容忍的。数据库系统主要通过 Redo（重做日志、后进项）来保证持久性。Redo 是一种典型的 WAL，每一个操作在执行时，都会记录这个操作的内容，并持久化到 Redo 中。当系统恢复时，如果发现之前的操作没有生效，可以通过 Redo 进行重做，保证已提交的操作有效。\n\n### 事务隔离级别\n\n前面提到，按照可见性进行划分，隔离性可以分为四种不同的事务隔离级别，下面逐一进行说明。\n\n**Read Uncommit（读未提交）** ：一个事务的修改可以立即被其它事务读取。读未提交的问题是会出现脏读，举例来说：事务1修改表A的数据，未提交，此时事务2读到了修改项，随后事务1进行了回滚。读未提交是最弱的一种隔离级别，在生产环境中，基本上不会使用。\n\n**Read Committed（读已提交）** ：一个事务的修改在事务提交后可以立即被其它事务读取到。读已提交避免了脏读的问题，这也是当前主流的数据库默认的事务隔离级别。\n\n**Repeatable Read（可重复读）** ：一个事务内部，前后多次的查询结果保持一致。回到隔离性的定义：一个事务的操作不受其他事务的影响。可重复读要解决的就是这个问题。在内部实现上，不管是读已提交还是可重复读，都需要借助 Readview 和 Undo 来实现，只是开启 Readview 的时间点有区别。Readview 和 Undo 也是 MySQL 实现 MVCC 的基础，更多细节在后续的文章单独介绍。\n\n**Serializable（串行化）** ：所有的事务，按顺序执行，任意时刻最多只有一个事务在执行。串行化从本质上来说完全限制了并发，在真实环境中一般不会使用。\n\n### 总结\n\n这篇文章主要从事务入手，简单的介绍了事务的基本特性和实现逻辑，引入了数据库系统中几个非常重要的概念：Undo、Redo、Readview、MVCC。这些概念会在后续的文章中详细说明。\n\n","slug":"transaction-intro","published":1,"updated":"2020-07-14T14:53:11.518Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckcm22jp00004n2gm32629esb","content":"<p>提到数据库，相信很多人第一个想到的就是事务，今天就从事务开始，对数据库的基本特征以及背后的实现逻辑进行一个简单的说明。</p>\n<h2 id=\"事务\"><a href=\"#事务\" class=\"headerlink\" title=\"事务\"></a>事务</h2><p>在写这篇文章的时候，笔者特意又重新查了下事务的定义。维基百科中关于事务的定义是：“事务是数据库系统执行过程中的一个逻辑单位，由一个有限的数据库操作序列构成”。事务的概念本身并没有什么好展开的，事务之所以成为数据库系统最重要的特征之一，是因为事务的 ACID 属性。</p>\n<a id=\"more\"></a>\n\n<h3 id=\"ACID\"><a href=\"#ACID\" class=\"headerlink\" title=\"ACID\"></a>ACID</h3><p><strong>Atomicity（原子性）</strong> ：事务中的一组操作，要么全部成功，要么全部失败，不存在部分成功的情况。原子性的定义相对是比较直观的，可以类比编程语言中的原子操作，从这个角度上来说，事务是数据库系统处理用户操作的最小单位（自动提交模式可以看作是一条语句一个事务）。数据库系统内部主要通过 Undo（回滚日志、前进项）来保证原子性。每一个操作在执行时，都会记录下执行前的状态到 Undo 中，当事务需要回滚时，就可以通过 Undo 恢复到事务执行前的状态。</p>\n<p><strong>Consistency（一致性）</strong> ：数据库总是从一个一致性状态转移到另一个一致性状态。一致性的定义比较模糊，什么叫从一个一致性状态转移到另一个一致性状态？其实这是由于中文的翻译往往只翻译了一半，关于一致性有一段非常最要的补充：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Any data written to the database must be valid according to all defined rules, </span><br><span class=\"line\">including constraints, cascades, triggers, and any combination thereof.</span><br></pre></td></tr></table></figure>\n\n<p>总结起来就是：数据库在任意时刻的状态都必须符合所有的验证规则。一个简单的例子：表A记录了用户的账户余额，表B记录了用户的消费记录。从数据库的角度，A中的值与B中记录的和应该总是一个固定值，这就是一条验证规则。另外一个例子：表A存了用户信息，表B存了地址信息，表B中的地址被表A引用（外键），那么删除表B中的记录时，必须检查表A中的记录，这也是一条验证规则。关于一致性的判断，更多的需要与关系间的内在逻辑相结合。</p>\n<p><strong>Isolation（隔离性）</strong> ：不同事务间的操作是相互隔离的，一个事务的操作不受其他事务的影响，也不会影响其他事务。关于隔离性，不同的数据库有不同的实现逻辑，按照可见性进行划分，可以分为四种不同的隔离级别。关于隔离级别，下个部分会进行详细介绍。</p>\n<p><strong>Durability（持久性）</strong> ：一个事务只要提交成功就必须完整保存，不管发生任何软件或者硬件故障都必须保证数据不会丢失。持久性可以说是数据库系统的基础，在真实的业务场景中，数据丢失也往往是最无法容忍的。数据库系统主要通过 Redo（重做日志、后进项）来保证持久性。Redo 是一种典型的 WAL，每一个操作在执行时，都会记录这个操作的内容，并持久化到 Redo 中。当系统恢复时，如果发现之前的操作没有生效，可以通过 Redo 进行重做，保证已提交的操作有效。</p>\n<h3 id=\"事务隔离级别\"><a href=\"#事务隔离级别\" class=\"headerlink\" title=\"事务隔离级别\"></a>事务隔离级别</h3><p>前面提到，按照可见性进行划分，隔离性可以分为四种不同的事务隔离级别，下面逐一进行说明。</p>\n<p><strong>Read Uncommit（读未提交）</strong> ：一个事务的修改可以立即被其它事务读取。读未提交的问题是会出现脏读，举例来说：事务1修改表A的数据，未提交，此时事务2读到了修改项，随后事务1进行了回滚。读未提交是最弱的一种隔离级别，在生产环境中，基本上不会使用。</p>\n<p><strong>Read Committed（读已提交）</strong> ：一个事务的修改在事务提交后可以立即被其它事务读取到。读已提交避免了脏读的问题，这也是当前主流的数据库默认的事务隔离级别。</p>\n<p><strong>Repeatable Read（可重复读）</strong> ：一个事务内部，前后多次的查询结果保持一致。回到隔离性的定义：一个事务的操作不受其他事务的影响。可重复读要解决的就是这个问题。在内部实现上，不管是读已提交还是可重复读，都需要借助 Readview 和 Undo 来实现，只是开启 Readview 的时间点有区别。Readview 和 Undo 也是 MySQL 实现 MVCC 的基础，更多细节在后续的文章单独介绍。</p>\n<p><strong>Serializable（串行化）</strong> ：所有的事务，按顺序执行，任意时刻最多只有一个事务在执行。串行化从本质上来说完全限制了并发，在真实环境中一般不会使用。</p>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>这篇文章主要从事务入手，简单的介绍了事务的基本特性和实现逻辑，引入了数据库系统中几个非常重要的概念：Undo、Redo、Readview、MVCC。这些概念会在后续的文章中详细说明。</p>\n","site":{"data":{}},"excerpt":"<p>提到数据库，相信很多人第一个想到的就是事务，今天就从事务开始，对数据库的基本特征以及背后的实现逻辑进行一个简单的说明。</p>\n<h2 id=\"事务\"><a href=\"#事务\" class=\"headerlink\" title=\"事务\"></a>事务</h2><p>在写这篇文章的时候，笔者特意又重新查了下事务的定义。维基百科中关于事务的定义是：“事务是数据库系统执行过程中的一个逻辑单位，由一个有限的数据库操作序列构成”。事务的概念本身并没有什么好展开的，事务之所以成为数据库系统最重要的特征之一，是因为事务的 ACID 属性。</p>","more":"<h3 id=\"ACID\"><a href=\"#ACID\" class=\"headerlink\" title=\"ACID\"></a>ACID</h3><p><strong>Atomicity（原子性）</strong> ：事务中的一组操作，要么全部成功，要么全部失败，不存在部分成功的情况。原子性的定义相对是比较直观的，可以类比编程语言中的原子操作，从这个角度上来说，事务是数据库系统处理用户操作的最小单位（自动提交模式可以看作是一条语句一个事务）。数据库系统内部主要通过 Undo（回滚日志、前进项）来保证原子性。每一个操作在执行时，都会记录下执行前的状态到 Undo 中，当事务需要回滚时，就可以通过 Undo 恢复到事务执行前的状态。</p>\n<p><strong>Consistency（一致性）</strong> ：数据库总是从一个一致性状态转移到另一个一致性状态。一致性的定义比较模糊，什么叫从一个一致性状态转移到另一个一致性状态？其实这是由于中文的翻译往往只翻译了一半，关于一致性有一段非常最要的补充：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Any data written to the database must be valid according to all defined rules, </span><br><span class=\"line\">including constraints, cascades, triggers, and any combination thereof.</span><br></pre></td></tr></table></figure>\n\n<p>总结起来就是：数据库在任意时刻的状态都必须符合所有的验证规则。一个简单的例子：表A记录了用户的账户余额，表B记录了用户的消费记录。从数据库的角度，A中的值与B中记录的和应该总是一个固定值，这就是一条验证规则。另外一个例子：表A存了用户信息，表B存了地址信息，表B中的地址被表A引用（外键），那么删除表B中的记录时，必须检查表A中的记录，这也是一条验证规则。关于一致性的判断，更多的需要与关系间的内在逻辑相结合。</p>\n<p><strong>Isolation（隔离性）</strong> ：不同事务间的操作是相互隔离的，一个事务的操作不受其他事务的影响，也不会影响其他事务。关于隔离性，不同的数据库有不同的实现逻辑，按照可见性进行划分，可以分为四种不同的隔离级别。关于隔离级别，下个部分会进行详细介绍。</p>\n<p><strong>Durability（持久性）</strong> ：一个事务只要提交成功就必须完整保存，不管发生任何软件或者硬件故障都必须保证数据不会丢失。持久性可以说是数据库系统的基础，在真实的业务场景中，数据丢失也往往是最无法容忍的。数据库系统主要通过 Redo（重做日志、后进项）来保证持久性。Redo 是一种典型的 WAL，每一个操作在执行时，都会记录这个操作的内容，并持久化到 Redo 中。当系统恢复时，如果发现之前的操作没有生效，可以通过 Redo 进行重做，保证已提交的操作有效。</p>\n<h3 id=\"事务隔离级别\"><a href=\"#事务隔离级别\" class=\"headerlink\" title=\"事务隔离级别\"></a>事务隔离级别</h3><p>前面提到，按照可见性进行划分，隔离性可以分为四种不同的事务隔离级别，下面逐一进行说明。</p>\n<p><strong>Read Uncommit（读未提交）</strong> ：一个事务的修改可以立即被其它事务读取。读未提交的问题是会出现脏读，举例来说：事务1修改表A的数据，未提交，此时事务2读到了修改项，随后事务1进行了回滚。读未提交是最弱的一种隔离级别，在生产环境中，基本上不会使用。</p>\n<p><strong>Read Committed（读已提交）</strong> ：一个事务的修改在事务提交后可以立即被其它事务读取到。读已提交避免了脏读的问题，这也是当前主流的数据库默认的事务隔离级别。</p>\n<p><strong>Repeatable Read（可重复读）</strong> ：一个事务内部，前后多次的查询结果保持一致。回到隔离性的定义：一个事务的操作不受其他事务的影响。可重复读要解决的就是这个问题。在内部实现上，不管是读已提交还是可重复读，都需要借助 Readview 和 Undo 来实现，只是开启 Readview 的时间点有区别。Readview 和 Undo 也是 MySQL 实现 MVCC 的基础，更多细节在后续的文章单独介绍。</p>\n<p><strong>Serializable（串行化）</strong> ：所有的事务，按顺序执行，任意时刻最多只有一个事务在执行。串行化从本质上来说完全限制了并发，在真实环境中一般不会使用。</p>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>这篇文章主要从事务入手，简单的介绍了事务的基本特性和实现逻辑，引入了数据库系统中几个非常重要的概念：Undo、Redo、Readview、MVCC。这些概念会在后续的文章中详细说明。</p>"}],"PostAsset":[],"PostCategory":[{"post_id":"ckcm22joq0000n2gm6y3i0o9k","category_id":"ckcm22joy0002n2gm36rv1oim","_id":"ckcm22jp50008n2gmhdq6a21f"},{"post_id":"ckcm22jp00004n2gm32629esb","category_id":"ckcm22joy0002n2gm36rv1oim","_id":"ckcm22jp5000an2gm9zw7bv06"}],"PostTag":[{"post_id":"ckcm22joq0000n2gm6y3i0o9k","tag_id":"ckcm22jp00003n2gm6rtkcgqo","_id":"ckcm22jp40007n2gm431jds1a"},{"post_id":"ckcm22jp00004n2gm32629esb","tag_id":"ckcm22jp20006n2gmdr8lb4ug","_id":"ckcm22jp50009n2gm9at77gie"}],"Tag":[{"name":"数据库","_id":"ckcm22jp00003n2gm6rtkcgqo"},{"name":"事务","_id":"ckcm22jp20006n2gmdr8lb4ug"}]}}